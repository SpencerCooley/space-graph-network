(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{287:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,b){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(t[p]=b[p])},r(t,b)},function(t,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.createEdgeCompoundProgram=e.AbstractEdgeProgram=void 0;var c=function(t){function e(e,n,r,o,c){return t.call(this,e,n,r,o,c)||this}return o(e,t),e}(n(285).AbstractProgram);e.AbstractEdgeProgram=c,e.createEdgeCompoundProgram=function(t){return function(){function e(e,n){this.programs=t.map((function(t){return new t(e,n)}))}return e.prototype.bufferData=function(){this.programs.forEach((function(t){return t.bufferData()}))},e.prototype.allocate=function(t){this.programs.forEach((function(e){return e.allocate(t)}))},e.prototype.bind=function(){},e.prototype.computeIndices=function(){this.programs.forEach((function(t){return t.computeIndices()}))},e.prototype.render=function(t){this.programs.forEach((function(e){e.bind(),e.bufferData(),e.render(t)}))},e.prototype.process=function(t,e,data,n,r){this.programs.forEach((function(o){return o.process(t,e,data,n,r)}))},e}()}},295:function(t,e,n){var r=n(6),o=n(191).values;r({target:"Object",stat:!0},{values:function(t){return o(t)}})},296:function(t,e,n){t.exports=function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,r(t,e)}function n(t){return n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(t)}function r(t,e){return r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(t,e)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function o(t,e,n){return o=i()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return n&&r(o,n.prototype),o},o.apply(null,arguments)}function a(t){var e="function"==typeof Map?new Map:void 0;return a=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,a)}function a(){return o(t,arguments,n(this).constructor)}return a.prototype=Object.create(t.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),r(a,t)},a(t)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var c=function(){for(var t=arguments[0],e=1,n=arguments.length;e<n;e++)if(arguments[e])for(var r in arguments[e])t[r]=arguments[e][r];return t};function s(t,e,n,r){var i=t._nodes.get(e),o=null;return i?o="mixed"===r?i.out&&i.out[n]||i.undirected&&i.undirected[n]:"directed"===r?i.out&&i.out[n]:i.undirected&&i.undirected[n]:o}function h(e){return null!==e&&"object"===t(e)&&"function"==typeof e.addUndirectedEdgeWithKey&&"function"==typeof e.dropNode}function d(e){return"object"===t(e)&&null!==e&&e.constructor===Object}function p(t){var e;for(e in t)return!1;return!0}function l(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function f(t,e,n){var r={enumerable:!0,configurable:!0};"function"==typeof n?r.get=n:(r.value=n,r.writable=!1),Object.defineProperty(t,e,r)}function g(t){return!(!d(t)||t.attributes&&!Array.isArray(t.attributes))}"function"==typeof Object.assign&&(c=Object.assign);var y,v={exports:{}},m="object"==typeof Reflect?Reflect:null,b=m&&"function"==typeof m.apply?m.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};y=m&&"function"==typeof m.ownKeys?m.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var w=Number.isNaN||function(t){return t!=t};function _(){_.init.call(this)}v.exports=_,v.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}P(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&P(t,"error",e,n)}(t,i,{once:!0})}))},_.EventEmitter=_,_.prototype._events=void 0,_.prototype._eventsCount=0,_.prototype._maxListeners=void 0;var x=10;function E(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function L(t){return void 0===t._maxListeners?_.defaultMaxListeners:t._maxListeners}function A(t,e,n,r){var i,o,a,u;if(E(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),void 0===a)a=o[e]=n,++t._eventsCount;else if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=L(t))>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,u=c,console&&console.warn&&console.warn(u)}return t}function k(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function G(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=k.bind(r);return i.listener=n,r.wrapFn=i,i}function S(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):T(i,i.length)}function C(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function T(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function P(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){r.once&&t.removeEventListener(e,i),n(o)}))}}function D(t){if("function"!=typeof t)throw new Error("obliterator/iterator: expecting a function!");this.next=t}Object.defineProperty(_,"defaultMaxListeners",{enumerable:!0,get:function(){return x},set:function(t){if("number"!=typeof t||t<0||w(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");x=t}}),_.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},_.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||w(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},_.prototype.getMaxListeners=function(){return L(this)},_.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)b(u,this,e);else{var c=u.length,s=T(u,c);for(n=0;n<c;++n)b(s[n],this,e)}return!0},_.prototype.addListener=function(t,e){return A(this,t,e,!1)},_.prototype.on=_.prototype.addListener,_.prototype.prependListener=function(t,e){return A(this,t,e,!0)},_.prototype.once=function(t,e){return E(e),this.on(t,G(this,t,e)),this},_.prototype.prependOnceListener=function(t,e){return E(e),this.prependListener(t,G(this,t,e)),this},_.prototype.removeListener=function(t,e){var n,r,i,o,a;if(E(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},_.prototype.off=_.prototype.removeListener,_.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},_.prototype.listeners=function(t){return S(this,t,!0)},_.prototype.rawListeners=function(t){return S(this,t,!1)},_.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):C.call(t,e)},_.prototype.listenerCount=C,_.prototype.eventNames=function(){return this._eventsCount>0?y(this._events):[]},"undefined"!=typeof Symbol&&(D.prototype[Symbol.iterator]=function(){return this}),D.of=function(){var t=arguments,e=t.length,n=0;return new D((function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}}))},D.empty=function(){return new D((function(){return{done:!0}}))},D.fromSequence=function(t){var e=0,n=t.length;return new D((function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}}))},D.is=function(t){return t instanceof D||"object"==typeof t&&null!==t&&"function"==typeof t.next};var M=D,O={};O.ARRAY_BUFFER_SUPPORT="undefined"!=typeof ArrayBuffer,O.SYMBOL_SUPPORT="undefined"!=typeof Symbol;var N=M,R=O,z=R.ARRAY_BUFFER_SUPPORT,U=R.SYMBOL_SUPPORT,j=function(t){var e=function(t){return"string"==typeof t||Array.isArray(t)||z&&ArrayBuffer.isView(t)?N.fromSequence(t):"object"!=typeof t||null===t?null:U&&"function"==typeof t[Symbol.iterator]?t[Symbol.iterator]():"function"==typeof t.next?t:null}(t);if(!e)throw new Error("obliterator: target is not iterable nor a valid iterator.");return e},F=j,I=function(t,e){for(var n,r=arguments.length>1?e:1/0,i=r!==1/0?new Array(r):[],o=0,a=F(t);;){if(o===r)return i;if((n=a.next()).done)return o!==e&&(i.length=o),i;i[o++]=n.value}},W=function(t){function n(e){var n;return(n=t.call(this)||this).name="GraphError",n.message=e,n}return e(n,t),n}(a(Error)),B=function(t){function n(e){var r;return(r=t.call(this,e)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(u(r),n.prototype.constructor),r}return e(n,t),n}(W),H=function(t){function n(e){var r;return(r=t.call(this,e)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(u(r),n.prototype.constructor),r}return e(n,t),n}(W),Y=function(t){function n(e){var r;return(r=t.call(this,e)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(u(r),n.prototype.constructor),r}return e(n,t),n}(W);function q(t,e){this.key=t,this.attributes=e,this.clear()}function V(t,e){this.key=t,this.attributes=e,this.clear()}function K(t,e){this.key=t,this.attributes=e,this.clear()}function Z(t,e,n,r,i){this.key=e,this.attributes=i,this.undirected=t,this.source=n,this.target=r}function X(t,e,n,r,i,o,a){var u,c,s,h;if(r=""+r,0===n){if(!(u=t._nodes.get(r)))throw new H("Graph.".concat(e,': could not find the "').concat(r,'" node in the graph.'));s=i,h=o}else if(3===n){if(i=""+i,!(c=t._edges.get(i)))throw new H("Graph.".concat(e,': could not find the "').concat(i,'" edge in the graph.'));var d=c.source.key,p=c.target.key;if(r===d)u=c.target;else{if(r!==p)throw new H("Graph.".concat(e,': the "').concat(r,'" node is not attached to the "').concat(i,'" edge (').concat(d,", ").concat(p,")."));u=c.source}s=o,h=a}else{if(!(c=t._edges.get(r)))throw new H("Graph.".concat(e,': could not find the "').concat(r,'" edge in the graph.'));u=1===n?c.source:c.target,s=i,h=o}return[u,s,h]}q.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.in={},this.out={},this.undirected={}},V.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.in={},this.out={}},K.prototype.clear=function(){this.undirectedDegree=0,this.undirected={}},Z.prototype.attach=function(){var t="out",e="in";this.undirected&&(t=e="undirected");var n=this.source.key,r=this.target.key;this.source[t][r]=this,this.undirected&&n===r||(this.target[e][n]=this)},Z.prototype.attachMulti=function(){var t="out",e="in",n=this.source.key,r=this.target.key;this.undirected&&(t=e="undirected");var i=this.source[t],o=i[r];if(void 0===o)return i[r]=this,void(this.undirected&&n===r||(this.target[e][n]=this));o.previous=this,this.next=o,i[r]=this,this.target[e][n]=this},Z.prototype.detach=function(){var t=this.source.key,e=this.target.key,n="out",r="in";this.undirected&&(n=r="undirected"),delete this.source[n][e],delete this.target[r][t]},Z.prototype.detachMulti=function(){var t=this.source.key,e=this.target.key,n="out",r="in";this.undirected&&(n=r="undirected"),void 0===this.previous?void 0===this.next?(delete this.source[n][e],delete this.target[r][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[r][t]=this.next):(this.previous.next=this.next,void 0!==this.next&&(this.next.previous=this.previous))};var Q=[{name:function(t){return"get".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,r,i){var o=X(this,e,n,t,r,i),a=o[0],u=o[1];return a.attributes[u]}}},{name:function(t){return"get".concat(t,"Attributes")},attacher:function(t,e,n){t.prototype[e]=function(t,r){return X(this,e,n,t,r)[0].attributes}}},{name:function(t){return"has".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,r,i){var o=X(this,e,n,t,r,i),a=o[0],u=o[1];return a.attributes.hasOwnProperty(u)}}},{name:function(t){return"set".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,r,i,o){var a=X(this,e,n,t,r,i,o),u=a[0],c=a[1],s=a[2];return u.attributes[c]=s,this.emit("nodeAttributesUpdated",{key:u.key,type:"set",attributes:u.attributes,name:c}),this}}},{name:function(t){return"update".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,r,i,o){var a=X(this,e,n,t,r,i,o),u=a[0],c=a[1],s=a[2];if("function"!=typeof s)throw new B("Graph.".concat(e,": updater should be a function."));var h=u.attributes,d=s(h[c]);return h[c]=d,this.emit("nodeAttributesUpdated",{key:u.key,type:"set",attributes:u.attributes,name:c}),this}}},{name:function(t){return"remove".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,r,i){var o=X(this,e,n,t,r,i),a=o[0],u=o[1];return delete a.attributes[u],this.emit("nodeAttributesUpdated",{key:a.key,type:"remove",attributes:a.attributes,name:u}),this}}},{name:function(t){return"replace".concat(t,"Attributes")},attacher:function(t,e,n){t.prototype[e]=function(t,r,i){var o=X(this,e,n,t,r,i),a=o[0],u=o[1];if(!d(u))throw new B("Graph.".concat(e,": provided attributes are not a plain object."));return a.attributes=u,this.emit("nodeAttributesUpdated",{key:a.key,type:"replace",attributes:a.attributes}),this}}},{name:function(t){return"merge".concat(t,"Attributes")},attacher:function(t,e,n){t.prototype[e]=function(t,r,i){var o=X(this,e,n,t,r,i),a=o[0],u=o[1];if(!d(u))throw new B("Graph.".concat(e,": provided attributes are not a plain object."));return c(a.attributes,u),this.emit("nodeAttributesUpdated",{key:a.key,type:"merge",attributes:a.attributes,data:u}),this}}},{name:function(t){return"update".concat(t,"Attributes")},attacher:function(t,e,n){t.prototype[e]=function(t,r,i){var o=X(this,e,n,t,r,i),a=o[0],u=o[1];if("function"!=typeof u)throw new B("Graph.".concat(e,": provided updater is not a function."));return a.attributes=u(a.attributes),this.emit("nodeAttributesUpdated",{key:a.key,type:"update",attributes:a.attributes}),this}}}],J=[{name:function(t){return"get".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,r){var i;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new Y("Graph.".concat(e,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new Y("Graph.".concat(e,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+t,a=""+r;if(r=arguments[2],!(i=s(this,o,a,n)))throw new H("Graph.".concat(e,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else{if("mixed"!==n)throw new Y("Graph.".concat(e,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(t=""+t,!(i=this._edges.get(t)))throw new H("Graph.".concat(e,': could not find the "').concat(t,'" edge in the graph.'))}return i.attributes[r]}}},{name:function(t){return"get".concat(t,"Attributes")},attacher:function(t,e,n){t.prototype[e]=function(t){var r;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new Y("Graph.".concat(e,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new Y("Graph.".concat(e,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var i=""+t,o=""+arguments[1];if(!(r=s(this,i,o,n)))throw new H("Graph.".concat(e,': could not find an edge for the given path ("').concat(i,'" - "').concat(o,'").'))}else{if("mixed"!==n)throw new Y("Graph.".concat(e,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(t=""+t,!(r=this._edges.get(t)))throw new H("Graph.".concat(e,': could not find the "').concat(t,'" edge in the graph.'))}return r.attributes}}},{name:function(t){return"has".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,r){var i;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new Y("Graph.".concat(e,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new Y("Graph.".concat(e,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+t,a=""+r;if(r=arguments[2],!(i=s(this,o,a,n)))throw new H("Graph.".concat(e,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else{if("mixed"!==n)throw new Y("Graph.".concat(e,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(t=""+t,!(i=this._edges.get(t)))throw new H("Graph.".concat(e,': could not find the "').concat(t,'" edge in the graph.'))}return i.attributes.hasOwnProperty(r)}}},{name:function(t){return"set".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,r,i){var o;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new Y("Graph.".concat(e,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new Y("Graph.".concat(e,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var a=""+t,u=""+r;if(r=arguments[2],i=arguments[3],!(o=s(this,a,u,n)))throw new H("Graph.".concat(e,': could not find an edge for the given path ("').concat(a,'" - "').concat(u,'").'))}else{if("mixed"!==n)throw new Y("Graph.".concat(e,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(t=""+t,!(o=this._edges.get(t)))throw new H("Graph.".concat(e,': could not find the "').concat(t,'" edge in the graph.'))}return o.attributes[r]=i,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}},{name:function(t){return"update".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,r,i){var o;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new Y("Graph.".concat(e,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new Y("Graph.".concat(e,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var a=""+t,u=""+r;if(r=arguments[2],i=arguments[3],!(o=s(this,a,u,n)))throw new H("Graph.".concat(e,': could not find an edge for the given path ("').concat(a,'" - "').concat(u,'").'))}else{if("mixed"!==n)throw new Y("Graph.".concat(e,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(t=""+t,!(o=this._edges.get(t)))throw new H("Graph.".concat(e,': could not find the "').concat(t,'" edge in the graph.'))}if("function"!=typeof i)throw new B("Graph.".concat(e,": updater should be a function."));return o.attributes[r]=i(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}},{name:function(t){return"remove".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,r){var i;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new Y("Graph.".concat(e,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new Y("Graph.".concat(e,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+t,a=""+r;if(r=arguments[2],!(i=s(this,o,a,n)))throw new H("Graph.".concat(e,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else{if("mixed"!==n)throw new Y("Graph.".concat(e,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(t=""+t,!(i=this._edges.get(t)))throw new H("Graph.".concat(e,': could not find the "').concat(t,'" edge in the graph.'))}return delete i.attributes[r],this.emit("edgeAttributesUpdated",{key:i.key,type:"remove",attributes:i.attributes,name:r}),this}}},{name:function(t){return"replace".concat(t,"Attributes")},attacher:function(t,e,n){t.prototype[e]=function(t,r){var i;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new Y("Graph.".concat(e,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new Y("Graph.".concat(e,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+t,a=""+r;if(r=arguments[2],!(i=s(this,o,a,n)))throw new H("Graph.".concat(e,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else{if("mixed"!==n)throw new Y("Graph.".concat(e,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(t=""+t,!(i=this._edges.get(t)))throw new H("Graph.".concat(e,': could not find the "').concat(t,'" edge in the graph.'))}if(!d(r))throw new B("Graph.".concat(e,": provided attributes are not a plain object."));return i.attributes=r,this.emit("edgeAttributesUpdated",{key:i.key,type:"replace",attributes:i.attributes}),this}}},{name:function(t){return"merge".concat(t,"Attributes")},attacher:function(t,e,n){t.prototype[e]=function(t,r){var i;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new Y("Graph.".concat(e,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new Y("Graph.".concat(e,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+t,a=""+r;if(r=arguments[2],!(i=s(this,o,a,n)))throw new H("Graph.".concat(e,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else{if("mixed"!==n)throw new Y("Graph.".concat(e,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(t=""+t,!(i=this._edges.get(t)))throw new H("Graph.".concat(e,': could not find the "').concat(t,'" edge in the graph.'))}if(!d(r))throw new B("Graph.".concat(e,": provided attributes are not a plain object."));return c(i.attributes,r),this.emit("edgeAttributesUpdated",{key:i.key,type:"merge",attributes:i.attributes,data:r}),this}}},{name:function(t){return"update".concat(t,"Attributes")},attacher:function(t,e,n){t.prototype[e]=function(t,r){var i;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new Y("Graph.".concat(e,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new Y("Graph.".concat(e,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+t,a=""+r;if(r=arguments[2],!(i=s(this,o,a,n)))throw new H("Graph.".concat(e,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else{if("mixed"!==n)throw new Y("Graph.".concat(e,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(t=""+t,!(i=this._edges.get(t)))throw new H("Graph.".concat(e,': could not find the "').concat(t,'" edge in the graph.'))}if("function"!=typeof r)throw new B("Graph.".concat(e,": provided updater is not a function."));return i.attributes=r(i.attributes),this.emit("edgeAttributesUpdated",{key:i.key,type:"update",attributes:i.attributes}),this}}}],$=M,tt=j,et=function(){var t=arguments,e=null,n=-1;return new $((function(){for(var r=null;;){if(null===e){if(++n>=t.length)return{done:!0};e=tt(t[n])}if(!0!==(r=e.next()).done)break;e=null}return r}))},nt=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function rt(t,e,n,r){var i=!1;for(var o in e)if(o!==r){var a=e[o];if(i=n(a.key,a.attributes,a.source.key,a.target.key,a.source.attributes,a.target.attributes,a.undirected),t&&i)return a.key}}function it(t,e,n,r){var i,o,a,u=!1;for(var c in e)if(c!==r){i=e[c];do{if(o=i.source,a=i.target,u=n(i.key,i.attributes,o.key,a.key,o.attributes,a.attributes,i.undirected),t&&u)return i.key;i=i.next}while(void 0!==i)}}function ot(t,e){var n,r=Object.keys(t),i=r.length,o=0;return new M((function(){do{if(n)n=n.next;else{if(o>=i)return{done:!0};var a=r[o++];if(a===e){n=void 0;continue}n=t[a]}}while(!n);return{done:!1,value:{edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected}}}))}function at(t,e,n,r){var i=e[n];if(i){var o=i.source,a=i.target;return r(i.key,i.attributes,o.key,a.key,o.attributes,a.attributes,i.undirected)&&t?i.key:void 0}}function st(t,e,n,r){var i=e[n];if(i){var o=!1;do{if(o=r(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),t&&o)return i.key;i=i.next}while(void 0!==i)}}function ct(t,e){var n=t[e];return void 0!==n.next?new M((function(){if(!n)return{done:!0};var t={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:t}})):M.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function ut(t,e){if(0===t.size)return[];if("mixed"===e||e===t.type)return"function"==typeof Array.from?Array.from(t._edges.keys()):I(t._edges.keys(),t._edges.size);for(var n,r,i="undirected"===e?t.undirectedSize:t.directedSize,o=new Array(i),a="undirected"===e,u=t._edges.values(),c=0;!0!==(n=u.next()).done;)(r=n.value).undirected===a&&(o[c++]=r.key);return o}function dt(t,e,n,r){if(0!==e.size)for(var i,o,a="mixed"!==n&&n!==e.type,u="undirected"===n,c=!1,s=e._edges.values();!0!==(i=s.next()).done;)if(o=i.value,!a||o.undirected===u){var h=o,d=h.key,p=h.attributes,l=h.source,f=h.target;if(c=r(d,p,l.key,f.key,l.attributes,f.attributes,o.undirected),t&&c)return d}}function ht(t,e){if(0===t.size)return M.empty();var n="mixed"!==e&&e!==t.type,r="undirected"===e,i=t._edges.values();return new M((function(){for(var t,e;;){if((t=i.next()).done)return t;if(e=t.value,!n||e.undirected===r)break}return{value:{edge:e.key,attributes:e.attributes,source:e.source.key,target:e.target.key,sourceAttributes:e.source.attributes,targetAttributes:e.target.attributes,undirected:e.undirected},done:!1}}))}function lt(t,e,n,r,i,o){var a,u=e?it:rt;if("undirected"!==n){if("out"!==r&&(a=u(t,i.in,o),t&&a))return a;if("in"!==r&&(a=u(t,i.out,o,r?void 0:i.key),t&&a))return a}if("directed"!==n&&(a=u(t,i.undirected,o),t&&a))return a}function ft(t,e,n,r){var i=[];return lt(!1,t,e,n,r,(function(t){i.push(t)})),i}function pt(t,e,n){var r=M.empty();return"undirected"!==t&&("out"!==e&&void 0!==n.in&&(r=et(r,ot(n.in))),"in"!==e&&void 0!==n.out&&(r=et(r,ot(n.out,e?void 0:n.key)))),"directed"!==t&&void 0!==n.undirected&&(r=et(r,ot(n.undirected))),r}function gt(t,e,n,r,i,o,a){var u,c=n?st:at;if("undirected"!==e){if(void 0!==i.in&&"out"!==r&&(u=c(t,i.in,o,a),t&&u))return u;if(void 0!==i.out&&"in"!==r&&(r||i.key!==o)&&(u=c(t,i.out,o,a),t&&u))return u}if("directed"!==e&&void 0!==i.undirected&&(u=c(t,i.undirected,o,a),t&&u))return u}function yt(t,e,n,r,i){var o=[];return gt(!1,t,e,n,r,i,(function(t){o.push(t)})),o}function vt(t,e,n,r){var i=M.empty();return"undirected"!==t&&(void 0!==n.in&&"out"!==e&&r in n.in&&(i=et(i,ct(n.in,r))),void 0!==n.out&&"in"!==e&&r in n.out&&(e||n.key!==r)&&(i=et(i,ct(n.out,r)))),"directed"!==t&&void 0!==n.undirected&&r in n.undirected&&(i=et(i,ct(n.undirected,r))),i}var mt=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function bt(){this.A=null,this.B=null}function wt(t,e,n,r,i){for(var o in r){var a=r[o],u=a.source,c=a.target,s=u===n?c:u;if(!e||!e.has(s.key)){var h=i(s.key,s.attributes);if(t&&h)return s.key}}}function _t(t,e,n,r,i){if("mixed"!==e){if("undirected"===e)return wt(t,null,r,r.undirected,i);if("string"==typeof n)return wt(t,null,r,r[n],i)}var o,a=new bt;if("undirected"!==e){if("out"!==n){if(o=wt(t,null,r,r.in,i),t&&o)return o;a.wrap(r.in)}if("in"!==n){if(o=wt(t,a,r,r.out,i),t&&o)return o;a.wrap(r.out)}}if("directed"!==e&&(o=wt(t,a,r,r.undirected,i),t&&o))return o}function xt(t,e,n){var r=Object.keys(n),i=r.length,o=0;return new M((function(){var a=null;do{if(o>=i)return t&&t.wrap(n),{done:!0};var u=n[r[o++]],c=u.source,s=u.target;a=c===e?s:c,t&&t.has(a.key)&&(a=null)}while(null===a);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}}))}function Et(t,e){var n=e.name,r=e.type,i=e.direction;t.prototype[n]=function(t){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return[];t=""+t;var e=this._nodes.get(t);if(void 0===e)throw new H("Graph.".concat(n,': could not find the "').concat(t,'" node in the graph.'));return function(t,e,n){if("mixed"!==t){if("undirected"===t)return Object.keys(n.undirected);if("string"==typeof e)return Object.keys(n[e])}var r=[];return _t(!1,t,e,n,(function(t){r.push(t)})),r}("mixed"===r?this.type:r,i,e)}}function Lt(t,e){var n=e.name,r=e.type,i=e.direction,o=n.slice(0,-1)+"Entries";t.prototype[o]=function(t){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return M.empty();t=""+t;var e=this._nodes.get(t);if(void 0===e)throw new H("Graph.".concat(o,': could not find the "').concat(t,'" node in the graph.'));return function(t,e,n){if("mixed"!==t){if("undirected"===t)return xt(null,n,n.undirected);if("string"==typeof e)return xt(null,n,n[e])}var r=M.empty(),i=new bt;return"undirected"!==t&&("out"!==e&&(r=et(r,xt(i,n,n.in))),"in"!==e&&(r=et(r,xt(i,n,n.out)))),"directed"!==t&&(r=et(r,xt(i,n,n.undirected))),r}("mixed"===r?this.type:r,i,e)}}function At(t,e,n,r,i){for(var o,a,u,c,s,h,d,p=r._nodes.values(),l=r.type;!0!==(o=p.next()).done;){var f=!1;if(a=o.value,"undirected"!==l)for(u in c=a.out){s=c[u];do{if(h=s.target,f=!0,d=i(a.key,h.key,a.attributes,h.attributes,s.key,s.attributes,s.undirected),t&&d)return s;s=s.next}while(s)}if("directed"!==l)for(u in c=a.undirected)if(!(e&&a.key>u)){s=c[u];do{if((h=s.target).key!==u&&(h=s.source),f=!0,d=i(a.key,h.key,a.attributes,h.attributes,s.key,s.attributes,s.undirected),t&&d)return s;s=s.next}while(s)}if(n&&!f&&(d=i(a.key,null,a.attributes,null,null,null,null),t&&d))return null}}function kt(t){if(!d(t))throw new B('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new B("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!d(t.attributes)||null===t.attributes))throw new B("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Gt(t){if(!d(t))throw new B('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new B("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new B("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!d(t.attributes)||null===t.attributes))throw new B("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&"boolean"!=typeof t.undirected)throw new B("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}bt.prototype.wrap=function(t){null===this.A?this.A=t:null===this.B&&(this.B=t)},bt.prototype.has=function(t){return null!==this.A&&t in this.A||null!==this.B&&t in this.B};var St,Ct=(St=255&Math.floor(256*Math.random()),function(){return St++}),Tt=new Set(["directed","undirected","mixed"]),Pt=new Set(["domain","_events","_eventsCount","_maxListeners"]),Dt={allowSelfLoops:!0,multi:!1,type:"mixed"};function Mt(t,e,n){var r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function Ot(t,e,n,r,i,o,a,u){if(!r&&"undirected"===t.type)throw new Y("Graph.".concat(e,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(r&&"directed"===t.type)throw new Y("Graph.".concat(e,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(u&&!d(u))throw new B("Graph.".concat(e,': invalid attributes. Expecting an object but got "').concat(u,'"'));if(o=""+o,a=""+a,u=u||{},!t.allowSelfLoops&&o===a)throw new Y("Graph.".concat(e,': source & target are the same ("').concat(o,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var c=t._nodes.get(o),s=t._nodes.get(a);if(!c)throw new H("Graph.".concat(e,': source node "').concat(o,'" not found.'));if(!s)throw new H("Graph.".concat(e,': target node "').concat(a,'" not found.'));var h={key:null,undirected:r,source:o,target:a,attributes:u};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new Y("Graph.".concat(e,': the "').concat(i,'" edge already exists in the graph.'));if(!t.multi&&(r?void 0!==c.undirected[a]:void 0!==c.out[a]))throw new Y("Graph.".concat(e,': an edge linking "').concat(o,'" to "').concat(a,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var p=new Z(r,i,c,s,u);t._edges.set(i,p);var l=o===a;return r?(c.undirectedDegree++,s.undirectedDegree++,l&&t._undirectedSelfLoopCount++):(c.outDegree++,s.inDegree++,l&&t._directedSelfLoopCount++),t.multi?p.attachMulti():p.attach(),r?t._undirectedSize++:t._directedSize++,h.key=i,t.emit("edgeAdded",h),i}function Nt(t,e,n,r,i,o,a,u,s){if(!r&&"undirected"===t.type)throw new Y("Graph.".concat(e,": you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead."));if(r&&"directed"===t.type)throw new Y("Graph.".concat(e,": you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead."));if(u)if(s){if("function"!=typeof u)throw new B("Graph.".concat(e,': invalid updater function. Expecting a function but got "').concat(u,'"'))}else if(!d(u))throw new B("Graph.".concat(e,': invalid attributes. Expecting an object but got "').concat(u,'"'));var h;if(o=""+o,a=""+a,s&&(h=u,u=void 0),!t.allowSelfLoops&&o===a)throw new Y("Graph.".concat(e,': source & target are the same ("').concat(o,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var p,l,f=t._nodes.get(o),g=t._nodes.get(a);if(!n&&(p=t._edges.get(i))){if(!(p.source.key===o&&p.target.key===a||r&&p.source.key===a&&p.target.key===o))throw new Y("Graph.".concat(e,': inconsistency detected when attempting to merge the "').concat(i,'" edge with "').concat(o,'" source & "').concat(a,'" target vs. ("').concat(p.source.key,'", "').concat(p.target.key,'").'));l=p}if(l||t.multi||!f||(l=r?f.undirected[a]:f.out[a]),l){var y=[l.key,!1,!1,!1];if(s?!h:!u)return y;if(s){var v=l.attributes;l.attributes=h(v),t.emit("edgeAttributesUpdated",{type:"replace",key:l.key,attributes:l.attributes})}else c(l.attributes,u),t.emit("edgeAttributesUpdated",{type:"merge",key:l.key,attributes:l.attributes,data:u});return y}u=u||{},s&&h&&(u=h(u));var m={key:null,undirected:r,source:o,target:a,attributes:u};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new Y("Graph.".concat(e,': the "').concat(i,'" edge already exists in the graph.'));var b=!1,w=!1;f||(f=Mt(t,o,{}),b=!0,o===a&&(g=f,w=!0)),g||(g=Mt(t,a,{}),w=!0),p=new Z(r,i,f,g,u),t._edges.set(i,p);var _=o===a;return r?(f.undirectedDegree++,g.undirectedDegree++,_&&t._undirectedSelfLoopCount++):(f.outDegree++,g.inDegree++,_&&t._directedSelfLoopCount++),t.multi?p.attachMulti():p.attach(),r?t._undirectedSize++:t._directedSize++,m.key=i,t.emit("edgeAdded",m),[i,!0,b,w]}function Rt(t,e){t._edges.delete(e.key);var n=e.source,r=e.target,i=e.attributes,o=e.undirected,a=n===r;o?(n.undirectedDegree--,r.undirectedDegree--,a&&t._undirectedSelfLoopCount--):(n.outDegree--,r.inDegree--,a&&t._directedSelfLoopCount--),t.multi?e.detachMulti():e.detach(),o?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:i,source:n.key,target:r.key,undirected:o})}var zt=function(n){function r(t){var e;if(e=n.call(this)||this,"boolean"!=typeof(t=c({},Dt,t)).multi)throw new B("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(t.multi,'".'));if(!Tt.has(t.type))throw new B('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(t.type,'".'));if("boolean"!=typeof t.allowSelfLoops)throw new B("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(t.allowSelfLoops,'".'));var r="mixed"===t.type?q:"directed"===t.type?V:K;l(u(e),"NodeDataClass",r);var i="geid_"+Ct()+"_",o=0;return l(u(e),"_attributes",{}),l(u(e),"_nodes",new Map),l(u(e),"_edges",new Map),l(u(e),"_directedSize",0),l(u(e),"_undirectedSize",0),l(u(e),"_directedSelfLoopCount",0),l(u(e),"_undirectedSelfLoopCount",0),l(u(e),"_edgeKeyGenerator",(function(){var t;do{t=i+o++}while(e._edges.has(t));return t})),l(u(e),"_options",t),Pt.forEach((function(t){return l(u(e),t,e[t])})),f(u(e),"order",(function(){return e._nodes.size})),f(u(e),"size",(function(){return e._edges.size})),f(u(e),"directedSize",(function(){return e._directedSize})),f(u(e),"undirectedSize",(function(){return e._undirectedSize})),f(u(e),"selfLoopCount",(function(){return e._directedSelfLoopCount+e._undirectedSelfLoopCount})),f(u(e),"directedSelfLoopCount",(function(){return e._directedSelfLoopCount})),f(u(e),"undirectedSelfLoopCount",(function(){return e._undirectedSelfLoopCount})),f(u(e),"multi",e._options.multi),f(u(e),"type",e._options.type),f(u(e),"allowSelfLoops",e._options.allowSelfLoops),f(u(e),"implementation",(function(){return"graphology"})),e}e(r,n);var i=r.prototype;return i._resetInstanceCounters=function(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0},i.hasNode=function(t){return this._nodes.has(""+t)},i.hasDirectedEdge=function(t,e){if("undirected"===this.type)return!1;if(1===arguments.length){var n=""+t,r=this._edges.get(n);return!!r&&!r.undirected}if(2===arguments.length){t=""+t,e=""+e;var i=this._nodes.get(t);if(!i)return!1;var o=i.out[e];return!(!o||this.multi&&!o.size)}throw new B("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},i.hasUndirectedEdge=function(t,e){if("directed"===this.type)return!1;if(1===arguments.length){var n=""+t,r=this._edges.get(n);return!!r&&r.undirected}if(2===arguments.length){t=""+t,e=""+e;var i=this._nodes.get(t);if(!i)return!1;var o=i.undirected[e];return!(!o||this.multi&&!o.size)}throw new B("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},i.hasEdge=function(t,e){if(1===arguments.length){var n=""+t;return this._edges.has(n)}if(2===arguments.length){t=""+t,e=""+e;var r=this._nodes.get(t);if(!r)return!1;var i=void 0!==r.out&&r.out[e];return i||(i=void 0!==r.undirected&&r.undirected[e]),!(!i||this.multi&&!i.size)}throw new B("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},i.directedEdge=function(t,e){if("undirected"!==this.type){if(t=""+t,e=""+e,this.multi)throw new Y("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var n=this._nodes.get(t);if(!n)throw new H('Graph.directedEdge: could not find the "'.concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new H('Graph.directedEdge: could not find the "'.concat(e,'" target node in the graph.'));var r=n.out&&n.out[e]||void 0;return r?r.key:void 0}},i.undirectedEdge=function(t,e){if("directed"!==this.type){if(t=""+t,e=""+e,this.multi)throw new Y("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var n=this._nodes.get(t);if(!n)throw new H('Graph.undirectedEdge: could not find the "'.concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new H('Graph.undirectedEdge: could not find the "'.concat(e,'" target node in the graph.'));var r=n.undirected&&n.undirected[e]||void 0;return r?r.key:void 0}},i.edge=function(t,e){if(this.multi)throw new Y("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new H('Graph.edge: could not find the "'.concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new H('Graph.edge: could not find the "'.concat(e,'" target node in the graph.'));var r=n.out&&n.out[e]||n.undirected&&n.undirected[e]||void 0;if(r)return r.key},i.areDirectedNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new H('Graph.areDirectedNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"undirected"!==this.type&&(e in n.in||e in n.out)},i.areOutNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new H('Graph.areOutNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"undirected"!==this.type&&e in n.out},i.areInNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new H('Graph.areInNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"undirected"!==this.type&&e in n.in},i.areUndirectedNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new H('Graph.areUndirectedNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"directed"!==this.type&&e in n.undirected},i.areNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new H('Graph.areNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"undirected"!==this.type&&(e in n.in||e in n.out)||"directed"!==this.type&&e in n.undirected},i.areInboundNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new H('Graph.areInboundNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"undirected"!==this.type&&e in n.in||"directed"!==this.type&&e in n.undirected},i.areOutboundNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new H('Graph.areOutboundNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"undirected"!==this.type&&e in n.out||"directed"!==this.type&&e in n.undirected},i.inDegree=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new H('Graph.inDegree: could not find the "'.concat(t,'" node in the graph.'));return"undirected"===this.type?0:e.inDegree},i.outDegree=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new H('Graph.outDegree: could not find the "'.concat(t,'" node in the graph.'));return"undirected"===this.type?0:e.outDegree},i.directedDegree=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new H('Graph.directedDegree: could not find the "'.concat(t,'" node in the graph.'));return"undirected"===this.type?0:e.inDegree+e.outDegree},i.undirectedDegree=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new H('Graph.undirectedDegree: could not find the "'.concat(t,'" node in the graph.'));return"directed"===this.type?0:e.undirectedDegree},i.inboundDegree=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new H('Graph.inboundDegree: could not find the "'.concat(t,'" node in the graph.'));var n=0;return"directed"!==this.type&&(n+=e.undirectedDegree),"undirected"!==this.type&&(n+=e.inDegree),n},i.outboundDegree=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new H('Graph.outboundDegree: could not find the "'.concat(t,'" node in the graph.'));var n=0;return"directed"!==this.type&&(n+=e.undirectedDegree),"undirected"!==this.type&&(n+=e.outDegree),n},i.degree=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new H('Graph.degree: could not find the "'.concat(t,'" node in the graph.'));var n=0;return"directed"!==this.type&&(n+=e.undirectedDegree),"undirected"!==this.type&&(n+=e.inDegree+e.outDegree),n},i.inDegreeWithoutSelfLoops=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new H('Graph.inDegreeWithoutSelfLoops: could not find the "'.concat(t,'" node in the graph.'));if("undirected"===this.type)return 0;var n=e.in[t],r=n?this.multi?n.size:1:0;return e.inDegree-r},i.outDegreeWithoutSelfLoops=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new H('Graph.outDegreeWithoutSelfLoops: could not find the "'.concat(t,'" node in the graph.'));if("undirected"===this.type)return 0;var n=e.out[t],r=n?this.multi?n.size:1:0;return e.outDegree-r},i.directedDegreeWithoutSelfLoops=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new H('Graph.directedDegreeWithoutSelfLoops: could not find the "'.concat(t,'" node in the graph.'));if("undirected"===this.type)return 0;var n=e.out[t],r=n?this.multi?n.size:1:0;return e.inDegree+e.outDegree-2*r},i.undirectedDegreeWithoutSelfLoops=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new H('Graph.undirectedDegreeWithoutSelfLoops: could not find the "'.concat(t,'" node in the graph.'));if("directed"===this.type)return 0;var n=e.undirected[t],r=n?this.multi?n.size:1:0;return e.undirectedDegree-2*r},i.inboundDegreeWithoutSelfLoops=function(t){t=""+t;var e,n=this._nodes.get(t);if(!n)throw new H('Graph.inboundDegreeWithoutSelfLoops: could not find the "'.concat(t,'" node in the graph.'));var r=0,i=0;return"directed"!==this.type&&(r+=n.undirectedDegree,i+=2*((e=n.undirected[t])?this.multi?e.size:1:0)),"undirected"!==this.type&&(r+=n.inDegree,i+=(e=n.out[t])?this.multi?e.size:1:0),r-i},i.outboundDegreeWithoutSelfLoops=function(t){t=""+t;var e,n=this._nodes.get(t);if(!n)throw new H('Graph.outboundDegreeWithoutSelfLoops: could not find the "'.concat(t,'" node in the graph.'));var r=0,i=0;return"directed"!==this.type&&(r+=n.undirectedDegree,i+=2*((e=n.undirected[t])?this.multi?e.size:1:0)),"undirected"!==this.type&&(r+=n.outDegree,i+=(e=n.in[t])?this.multi?e.size:1:0),r-i},i.degreeWithoutSelfLoops=function(t){t=""+t;var e,n=this._nodes.get(t);if(!n)throw new H('Graph.degreeWithoutSelfLoops: could not find the "'.concat(t,'" node in the graph.'));var r=0,i=0;return"directed"!==this.type&&(r+=n.undirectedDegree,i+=2*((e=n.undirected[t])?this.multi?e.size:1:0)),"undirected"!==this.type&&(r+=n.inDegree+n.outDegree,i+=2*((e=n.out[t])?this.multi?e.size:1:0)),r-i},i.source=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new H('Graph.source: could not find the "'.concat(t,'" edge in the graph.'));return e.source.key},i.target=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new H('Graph.target: could not find the "'.concat(t,'" edge in the graph.'));return e.target.key},i.extremities=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new H('Graph.extremities: could not find the "'.concat(t,'" edge in the graph.'));return[e.source.key,e.target.key]},i.opposite=function(t,e){t=""+t,e=""+e;var n=this._edges.get(e);if(!n)throw new H('Graph.opposite: could not find the "'.concat(e,'" edge in the graph.'));var r=n.source.key,i=n.target.key;if(t===r)return i;if(t===i)return r;throw new H('Graph.opposite: the "'.concat(t,'" node is not attached to the "').concat(e,'" edge (').concat(r,", ").concat(i,")."))},i.hasExtremity=function(t,e){t=""+t,e=""+e;var n=this._edges.get(t);if(!n)throw new H('Graph.hasExtremity: could not find the "'.concat(t,'" edge in the graph.'));return n.source.key===e||n.target.key===e},i.isUndirected=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new H('Graph.isUndirected: could not find the "'.concat(t,'" edge in the graph.'));return e.undirected},i.isDirected=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new H('Graph.isDirected: could not find the "'.concat(t,'" edge in the graph.'));return!e.undirected},i.isSelfLoop=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new H('Graph.isSelfLoop: could not find the "'.concat(t,'" edge in the graph.'));return e.source===e.target},i.addNode=function(t,e){var n=function(t,e,n){if(n&&!d(n))throw new B('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(n,'"'));if(e=""+e,n=n||{},t._nodes.has(e))throw new Y('Graph.addNode: the "'.concat(e,'" node already exist in the graph.'));var r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}(this,t,e);return n.key},i.mergeNode=function(t,e){if(e&&!d(e))throw new B('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(e,'"'));t=""+t,e=e||{};var n=this._nodes.get(t);return n?(e&&(c(n.attributes,e),this.emit("nodeAttributesUpdated",{type:"merge",key:t,attributes:n.attributes,data:e})),[t,!1]):(n=new this.NodeDataClass(t,e),this._nodes.set(t,n),this.emit("nodeAdded",{key:t,attributes:e}),[t,!0])},i.updateNode=function(t,e){if(e&&"function"!=typeof e)throw new B('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(e,'"'));t=""+t;var n=this._nodes.get(t);if(n){if(e){var r=n.attributes;n.attributes=e(r),this.emit("nodeAttributesUpdated",{type:"replace",key:t,attributes:n.attributes})}return[t,!1]}var i=e?e({}):{};return n=new this.NodeDataClass(t,i),this._nodes.set(t,n),this.emit("nodeAdded",{key:t,attributes:i}),[t,!0]},i.dropNode=function(t){t=""+t;var e,n=this._nodes.get(t);if(!n)throw new H('Graph.dropNode: could not find the "'.concat(t,'" node in the graph.'));if("undirected"!==this.type){for(var r in n.out){e=n.out[r];do{Rt(this,e),e=e.next}while(e)}for(var i in n.in){e=n.in[i];do{Rt(this,e),e=e.next}while(e)}}if("directed"!==this.type)for(var o in n.undirected){e=n.undirected[o];do{Rt(this,e),e=e.next}while(e)}this._nodes.delete(t),this.emit("nodeDropped",{key:t,attributes:n.attributes})},i.dropEdge=function(t){var e;if(arguments.length>1){var n=""+arguments[0],r=""+arguments[1];if(!(e=s(this,n,r,this.type)))throw new H('Graph.dropEdge: could not find the "'.concat(n,'" -> "').concat(r,'" edge in the graph.'))}else if(t=""+t,!(e=this._edges.get(t)))throw new H('Graph.dropEdge: could not find the "'.concat(t,'" edge in the graph.'));return Rt(this,e),this},i.dropDirectedEdge=function(t,e){if(arguments.length<2)throw new Y("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Y("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var n=s(this,t=""+t,e=""+e,"directed");if(!n)throw new H('Graph.dropDirectedEdge: could not find a "'.concat(t,'" -> "').concat(e,'" edge in the graph.'));return Rt(this,n),this},i.dropUndirectedEdge=function(t,e){if(arguments.length<2)throw new Y("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Y("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var n=s(this,t,e,"undirected");if(!n)throw new H('Graph.dropUndirectedEdge: could not find a "'.concat(t,'" -> "').concat(e,'" edge in the graph.'));return Rt(this,n),this},i.clear=function(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")},i.clearEdges=function(){for(var t,e=this._nodes.values();!0!==(t=e.next()).done;)t.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")},i.getAttribute=function(t){return this._attributes[t]},i.getAttributes=function(){return this._attributes},i.hasAttribute=function(t){return this._attributes.hasOwnProperty(t)},i.setAttribute=function(t,e){return this._attributes[t]=e,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this},i.updateAttribute=function(t,e){if("function"!=typeof e)throw new B("Graph.updateAttribute: updater should be a function.");var n=this._attributes[t];return this._attributes[t]=e(n),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this},i.removeAttribute=function(t){return delete this._attributes[t],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:t}),this},i.replaceAttributes=function(t){if(!d(t))throw new B("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=t,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},i.mergeAttributes=function(t){if(!d(t))throw new B("Graph.mergeAttributes: provided attributes are not a plain object.");return c(this._attributes,t),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:t}),this},i.updateAttributes=function(t){if("function"!=typeof t)throw new B("Graph.updateAttributes: provided updater is not a function.");return this._attributes=t(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this},i.updateEachNodeAttributes=function(t,e){if("function"!=typeof t)throw new B("Graph.updateEachNodeAttributes: expecting an updater function.");if(e&&!g(e))throw new B("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var n,r,i=this._nodes.values();!0!==(n=i.next()).done;)(r=n.value).attributes=t(r.key,r.attributes);this.emit("eachNodeAttributesUpdated",{hints:e||null})},i.updateEachEdgeAttributes=function(t,e){if("function"!=typeof t)throw new B("Graph.updateEachEdgeAttributes: expecting an updater function.");if(e&&!g(e))throw new B("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var n,r,i,o,a=this._edges.values();!0!==(n=a.next()).done;)i=(r=n.value).source,o=r.target,r.attributes=t(r.key,r.attributes,i.key,o.key,i.attributes,o.attributes,r.undirected);this.emit("eachEdgeAttributesUpdated",{hints:e||null})},i.forEachAdjacencyEntry=function(t){if("function"!=typeof t)throw new B("Graph.forEachAdjacencyEntry: expecting a callback.");At(!1,!1,!1,this,t)},i.forEachAdjacencyEntryWithOrphans=function(t){if("function"!=typeof t)throw new B("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");At(!1,!1,!0,this,t)},i.forEachAssymetricAdjacencyEntry=function(t){if("function"!=typeof t)throw new B("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");At(!1,!0,!1,this,t)},i.forEachAssymetricAdjacencyEntryWithOrphans=function(t){if("function"!=typeof t)throw new B("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");At(!1,!0,!0,this,t)},i.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):I(this._nodes.keys(),this._nodes.size)},i.forEachNode=function(t){if("function"!=typeof t)throw new B("Graph.forEachNode: expecting a callback.");for(var e,n,r=this._nodes.values();!0!==(e=r.next()).done;)t((n=e.value).key,n.attributes)},i.findNode=function(t){if("function"!=typeof t)throw new B("Graph.findNode: expecting a callback.");for(var e,n,r=this._nodes.values();!0!==(e=r.next()).done;)if(t((n=e.value).key,n.attributes))return n.key},i.mapNodes=function(t){if("function"!=typeof t)throw new B("Graph.mapNode: expecting a callback.");for(var e,n,r=this._nodes.values(),i=new Array(this.order),o=0;!0!==(e=r.next()).done;)n=e.value,i[o++]=t(n.key,n.attributes);return i},i.someNode=function(t){if("function"!=typeof t)throw new B("Graph.someNode: expecting a callback.");for(var e,n,r=this._nodes.values();!0!==(e=r.next()).done;)if(t((n=e.value).key,n.attributes))return!0;return!1},i.everyNode=function(t){if("function"!=typeof t)throw new B("Graph.everyNode: expecting a callback.");for(var e,n,r=this._nodes.values();!0!==(e=r.next()).done;)if(!t((n=e.value).key,n.attributes))return!1;return!0},i.filterNodes=function(t){if("function"!=typeof t)throw new B("Graph.filterNodes: expecting a callback.");for(var e,n,r=this._nodes.values(),i=[];!0!==(e=r.next()).done;)t((n=e.value).key,n.attributes)&&i.push(n.key);return i},i.reduceNodes=function(t,e){if("function"!=typeof t)throw new B("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new B("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");for(var n,r,i=e,o=this._nodes.values();!0!==(n=o.next()).done;)i=t(i,(r=n.value).key,r.attributes);return i},i.nodeEntries=function(){var t=this._nodes.values();return new M((function(){var e=t.next();if(e.done)return e;var n=e.value;return{value:{node:n.key,attributes:n.attributes},done:!1}}))},i.export=function(){var t=new Array(this._nodes.size),e=0;this._nodes.forEach((function(n,r){t[e++]=function(t,e){var n={key:t};return p(e.attributes)||(n.attributes=c({},e.attributes)),n}(r,n)}));var n=new Array(this._edges.size);return e=0,this._edges.forEach((function(t,r){n[e++]=function(t,e){var n={key:t,source:e.source.key,target:e.target.key};return p(e.attributes)||(n.attributes=c({},e.attributes)),e.undirected&&(n.undirected=!0),n}(r,t)})),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:t,edges:n}},i.import=function(t){var e,n,r,i,o,a=this,u=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(h(t))return t.forEachNode((function(t,e){u?a.mergeNode(t,e):a.addNode(t,e)})),t.forEachEdge((function(t,e,n,r,i,o,c){u?c?a.mergeUndirectedEdgeWithKey(t,n,r,e):a.mergeDirectedEdgeWithKey(t,n,r,e):c?a.addUndirectedEdgeWithKey(t,n,r,e):a.addDirectedEdgeWithKey(t,n,r,e)})),this;if(!d(t))throw new B("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(t.attributes){if(!d(t.attributes))throw new B("Graph.import: invalid attributes. Expecting a plain object.");u?this.mergeAttributes(t.attributes):this.replaceAttributes(t.attributes)}if(t.nodes){if(r=t.nodes,!Array.isArray(r))throw new B("Graph.import: invalid nodes. Expecting an array.");for(e=0,n=r.length;e<n;e++){kt(i=r[e]);var c=i,s=c.key,p=c.attributes;u?this.mergeNode(s,p):this.addNode(s,p)}}if(t.edges){if(r=t.edges,!Array.isArray(r))throw new B("Graph.import: invalid edges. Expecting an array.");for(e=0,n=r.length;e<n;e++){Gt(o=r[e]);var l=o,f=l.source,g=l.target,y=l.attributes,v=l.undirected,m=void 0!==v&&v;"key"in o?(u?m?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:m?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,o.key,f,g,y):(u?m?this.mergeUndirectedEdge:this.mergeDirectedEdge:m?this.addUndirectedEdge:this.addDirectedEdge).call(this,f,g,y)}}return this},i.nullCopy=function(t){var e=new r(c({},this._options,t));return e.replaceAttributes(c({},this.getAttributes())),e},i.emptyCopy=function(t){var e=this.nullCopy(t);return this._nodes.forEach((function(t,n){var r=c({},t.attributes);t=new e.NodeDataClass(n,r),e._nodes.set(n,t)})),e},i.copy=function(t){if("string"==typeof(t=t||{}).type&&t.type!==this.type&&"mixed"!==t.type)throw new Y('Graph.copy: cannot create an incompatible copy from "'.concat(this.type,'" type to "').concat(t.type,'" because this would mean losing information about the current graph.'));if("boolean"==typeof t.multi&&t.multi!==this.multi&&!0!==t.multi)throw new Y("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if("boolean"==typeof t.allowSelfLoops&&t.allowSelfLoops!==this.allowSelfLoops&&!0!==t.allowSelfLoops)throw new Y("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");for(var e,n,r=this.emptyCopy(t),i=this._edges.values();!0!==(e=i.next()).done;)Ot(r,"copy",!1,(n=e.value).undirected,n.key,n.source.key,n.target.key,c({},n.attributes));return r},i.toJSON=function(){return this.export()},i.toString=function(){return"[object Graph]"},i.inspect=function(){var e=this,n={};this._nodes.forEach((function(t,e){n[e]=t.attributes}));var r={},i={};this._edges.forEach((function(t,n){var o,a=t.undirected?"--":"->",u="",c=t.source.key,s=t.target.key;t.undirected&&c>s&&(o=c,c=s,s=o);var h="(".concat(c,")").concat(a,"(").concat(s,")");n.startsWith("geid_")?e.multi&&(void 0===i[h]?i[h]=0:i[h]++,u+="".concat(i[h],". ")):u+="[".concat(n,"]: "),r[u+=h]=t.attributes}));var o={};for(var a in this)this.hasOwnProperty(a)&&!Pt.has(a)&&"function"!=typeof this[a]&&"symbol"!==t(a)&&(o[a]=this[a]);return o.attributes=this._attributes,o.nodes=n,o.edges=r,l(o,"constructor",this.constructor),o},r}(v.exports.EventEmitter);"undefined"!=typeof Symbol&&(zt.prototype[Symbol.for("nodejs.util.inspect.custom")]=zt.prototype.inspect),[{name:function(t){return"".concat(t,"Edge")},generateKey:!0},{name:function(t){return"".concat(t,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(t){return"".concat(t,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(t){return"".concat(t,"EdgeWithKey")}},{name:function(t){return"".concat(t,"DirectedEdgeWithKey")},type:"directed"},{name:function(t){return"".concat(t,"UndirectedEdgeWithKey")},type:"undirected"}].forEach((function(t){["add","merge","update"].forEach((function(e){var n=t.name(e),r="add"===e?Ot:Nt;t.generateKey?zt.prototype[n]=function(i,o,a){return r(this,n,!0,"undirected"===(t.type||this.type),null,i,o,a,"update"===e)}:zt.prototype[n]=function(i,o,a,u){return r(this,n,!1,"undirected"===(t.type||this.type),i,o,a,u,"update"===e)}}))})),function(t){Q.forEach((function(e){var n=e.name,r=e.attacher;r(t,n("Node"),0),r(t,n("Source"),1),r(t,n("Target"),2),r(t,n("Opposite"),3)}))}(zt),function(t){J.forEach((function(e){var n=e.name,r=e.attacher;r(t,n("Edge"),"mixed"),r(t,n("DirectedEdge"),"directed"),r(t,n("UndirectedEdge"),"undirected")}))}(zt),function(t){nt.forEach((function(e){!function(t,e){var n=e.name,r=e.type,i=e.direction;t.prototype[n]=function(t,e){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return[];if(!arguments.length)return ut(this,r);if(1===arguments.length){t=""+t;var o=this._nodes.get(t);if(void 0===o)throw new H("Graph.".concat(n,': could not find the "').concat(t,'" node in the graph.'));return ft(this.multi,"mixed"===r?this.type:r,i,o)}if(2===arguments.length){t=""+t,e=""+e;var a=this._nodes.get(t);if(!a)throw new H("Graph.".concat(n,':  could not find the "').concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new H("Graph.".concat(n,':  could not find the "').concat(e,'" target node in the graph.'));return yt(r,this.multi,i,a,e)}throw new B("Graph.".concat(n,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(t,e),function(t,e){var n=e.name,r=e.type,i=e.direction,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(t,e,n){if("mixed"===r||"mixed"===this.type||r===this.type){if(1===arguments.length)return dt(!1,this,r,n=t);if(2===arguments.length){t=""+t,n=e;var a=this._nodes.get(t);if(void 0===a)throw new H("Graph.".concat(o,': could not find the "').concat(t,'" node in the graph.'));return lt(!1,this.multi,"mixed"===r?this.type:r,i,a,n)}if(3===arguments.length){t=""+t,e=""+e;var u=this._nodes.get(t);if(!u)throw new H("Graph.".concat(o,':  could not find the "').concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new H("Graph.".concat(o,':  could not find the "').concat(e,'" target node in the graph.'));return gt(!1,r,this.multi,i,u,e,n)}throw new B("Graph.".concat(o,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}};var a="map"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){var t,e=Array.prototype.slice.call(arguments),n=e.pop();if(0===e.length){var i=0;"directed"!==r&&(i+=this.undirectedSize),"undirected"!==r&&(i+=this.directedSize),t=new Array(i);var a=0;e.push((function(e,r,i,o,u,c,s){t[a++]=n(e,r,i,o,u,c,s)}))}else t=[],e.push((function(e,r,i,o,a,u,c){t.push(n(e,r,i,o,a,u,c))}));return this[o].apply(this,e),t};var u="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[u]=function(){var t=Array.prototype.slice.call(arguments),e=t.pop(),n=[];return t.push((function(t,r,i,o,a,u,c){e(t,r,i,o,a,u,c)&&n.push(t)})),this[o].apply(this,t),n};var c="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[c]=function(){var t,e,n=Array.prototype.slice.call(arguments);if(n.length<2||n.length>4)throw new B("Graph.".concat(c,": invalid number of arguments (expecting 2, 3 or 4 and got ").concat(n.length,")."));if("function"==typeof n[n.length-1]&&"function"!=typeof n[n.length-2])throw new B("Graph.".concat(c,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));2===n.length?(t=n[0],e=n[1],n=[]):3===n.length?(t=n[1],e=n[2],n=[n[0]]):4===n.length&&(t=n[2],e=n[3],n=[n[0],n[1]]);var r=e;return n.push((function(e,n,i,o,a,u,c){r=t(r,e,n,i,o,a,u,c)})),this[o].apply(this,n),r}}(t,e),function(t,e){var n=e.name,r=e.type,i=e.direction,o="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(t,e,n){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return!1;if(1===arguments.length)return dt(!0,this,r,n=t);if(2===arguments.length){t=""+t,n=e;var a=this._nodes.get(t);if(void 0===a)throw new H("Graph.".concat(o,': could not find the "').concat(t,'" node in the graph.'));return lt(!0,this.multi,"mixed"===r?this.type:r,i,a,n)}if(3===arguments.length){t=""+t,e=""+e;var u=this._nodes.get(t);if(!u)throw new H("Graph.".concat(o,':  could not find the "').concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new H("Graph.".concat(o,':  could not find the "').concat(e,'" target node in the graph.'));return gt(!0,r,this.multi,i,u,e,n)}throw new B("Graph.".concat(o,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))};var a="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){var t=Array.prototype.slice.call(arguments),e=t.pop();return t.push((function(t,n,r,i,o,a,u){return e(t,n,r,i,o,a,u)})),!!this[o].apply(this,t)};var u="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[u]=function(){var t=Array.prototype.slice.call(arguments),e=t.pop();return t.push((function(t,n,r,i,o,a,u){return!e(t,n,r,i,o,a,u)})),!this[o].apply(this,t)}}(t,e),function(t,e){var n=e.name,r=e.type,i=e.direction,o=n.slice(0,-1)+"Entries";t.prototype[o]=function(t,e){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return M.empty();if(!arguments.length)return ht(this,r);if(1===arguments.length){t=""+t;var n=this._nodes.get(t);if(!n)throw new H("Graph.".concat(o,': could not find the "').concat(t,'" node in the graph.'));return pt(r,i,n)}if(2===arguments.length){t=""+t,e=""+e;var a=this._nodes.get(t);if(!a)throw new H("Graph.".concat(o,':  could not find the "').concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new H("Graph.".concat(o,':  could not find the "').concat(e,'" target node in the graph.'));return vt(r,i,a,e)}throw new B("Graph.".concat(o,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(t,e)}))}(zt),function(t){mt.forEach((function(e){Et(t,e),function(t,e){var n=e.name,r=e.type,i=e.direction,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(t,e){if("mixed"===r||"mixed"===this.type||r===this.type){t=""+t;var n=this._nodes.get(t);if(void 0===n)throw new H("Graph.".concat(o,': could not find the "').concat(t,'" node in the graph.'));_t(!1,"mixed"===r?this.type:r,i,n,e)}};var a="map"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(t,e){var n=[];return this[o](t,(function(t,r){n.push(e(t,r))})),n};var u="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[u]=function(t,e){var n=[];return this[o](t,(function(t,r){e(t,r)&&n.push(t)})),n};var c="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[c]=function(t,e,n){if(arguments.length<3)throw new B("Graph.".concat(c,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));var r=n;return this[o](t,(function(t,n){r=e(r,t,n)})),r}}(t,e),function(t,e){var n=e.name,r=e.type,i=e.direction,o=n[0].toUpperCase()+n.slice(1,-1),a="find"+o;t.prototype[a]=function(t,e){if("mixed"===r||"mixed"===this.type||r===this.type){t=""+t;var n=this._nodes.get(t);if(void 0===n)throw new H("Graph.".concat(a,': could not find the "').concat(t,'" node in the graph.'));return _t(!0,"mixed"===r?this.type:r,i,n,e)}};var u="some"+o;t.prototype[u]=function(t,e){return!!this[a](t,e)};var c="every"+o;t.prototype[c]=function(t,e){return!this[a](t,(function(t,n){return!e(t,n)}))}}(t,e),Lt(t,e)}))}(zt);var Ut=function(t){function n(e){var n=c({type:"directed"},e);if("multi"in n&&!1!==n.multi)throw new B("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==n.type)throw new B('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');return t.call(this,n)||this}return e(n,t),n}(zt),jt=function(t){function n(e){var n=c({type:"undirected"},e);if("multi"in n&&!1!==n.multi)throw new B("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==n.type)throw new B('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');return t.call(this,n)||this}return e(n,t),n}(zt),Ft=function(t){function n(e){var n=c({multi:!0},e);if("multi"in n&&!0!==n.multi)throw new B("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return t.call(this,n)||this}return e(n,t),n}(zt),It=function(t){function n(e){var n=c({type:"directed",multi:!0},e);if("multi"in n&&!0!==n.multi)throw new B("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==n.type)throw new B('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');return t.call(this,n)||this}return e(n,t),n}(zt),Wt=function(t){function n(e){var n=c({type:"undirected",multi:!0},e);if("multi"in n&&!0!==n.multi)throw new B("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==n.type)throw new B('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');return t.call(this,n)||this}return e(n,t),n}(zt);function Bt(t){t.from=function(e,n){var r=c({},e.options,n),i=new t(r);return i.import(e),i}}return Bt(zt),Bt(Ut),Bt(jt),Bt(Ft),Bt(It),Bt(Wt),zt.Graph=zt,zt.DirectedGraph=Ut,zt.UndirectedGraph=jt,zt.MultiGraph=Ft,zt.MultiDirectedGraph=It,zt.MultiUndirectedGraph=Wt,zt.InvalidArgumentsGraphError=B,zt.NotFoundGraphError=H,zt.UsageGraphError=Y,zt}()},297:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Sigma=e.MouseCaptor=e.QuadTree=e.Camera=void 0;var o=r(n(311));e.Sigma=o.default;var c=r(n(298));e.Camera=c.default;var h=r(n(304));e.QuadTree=h.default;var d=r(n(302));e.MouseCaptor=d.default,e.default=o.default},298:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,b){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(t[p]=b[p])},r(t,b)},function(t,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}),c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var h=n(312),d=c(n(301)),l=n(280),f=n(281),y=1.5,v=function(t){function e(){var e=t.call(this)||this;return e.x=.5,e.y=.5,e.angle=0,e.ratio=1,e.minRatio=null,e.maxRatio=null,e.nextFrame=null,e.previousState=null,e.enabled=!0,e.previousState=e.getState(),e}return o(e,t),e.from=function(t){return(new e).setState(t)},e.prototype.enable=function(){return this.enabled=!0,this},e.prototype.disable=function(){return this.enabled=!1,this},e.prototype.getState=function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}},e.prototype.hasState=function(t){return this.x===t.x&&this.y===t.y&&this.ratio===t.ratio&&this.angle===t.angle},e.prototype.getPreviousState=function(){var t=this.previousState;return t?{x:t.x,y:t.y,angle:t.angle,ratio:t.ratio}:null},e.prototype.getBoundedRatio=function(t){var e=t;return"number"==typeof this.minRatio&&(e=Math.max(e,this.minRatio)),"number"==typeof this.maxRatio&&(e=Math.min(e,this.maxRatio)),e},e.prototype.validateState=function(t){var e={};return"number"==typeof t.x&&(e.x=t.x),"number"==typeof t.y&&(e.y=t.y),"number"==typeof t.angle&&(e.angle=t.angle),"number"==typeof t.ratio&&(e.ratio=this.getBoundedRatio(t.ratio)),e},e.prototype.isAnimated=function(){return!!this.nextFrame},e.prototype.setState=function(t){if(!this.enabled)return this;this.previousState=this.getState();var e=this.validateState(t);return"number"==typeof e.x&&(this.x=e.x),"number"==typeof e.y&&(this.y=e.y),"number"==typeof e.angle&&(this.angle=e.angle),"number"==typeof e.ratio&&(this.ratio=e.ratio),this.hasState(this.previousState)||this.emit("updated",this.getState()),this},e.prototype.animate=function(t,e,n){var r=this;if(this.enabled){var o=Object.assign({},h.ANIMATE_DEFAULTS,e),c=this.validateState(t),f="function"==typeof o.easing?o.easing:d.default[o.easing],y=Date.now(),v=this.getState(),m=function(){var t=(Date.now()-y)/o.duration;if(t>=1)return r.nextFrame=null,r.setState(c),void(r.animationCallback&&(r.animationCallback.call(null),r.animationCallback=void 0));var e=f(t),n={};"number"==typeof c.x&&(n.x=v.x+(c.x-v.x)*e),"number"==typeof c.y&&(n.y=v.y+(c.y-v.y)*e),"number"==typeof c.angle&&(n.angle=v.angle+(c.angle-v.angle)*e),"number"==typeof c.ratio&&(n.ratio=v.ratio+(c.ratio-v.ratio)*e),r.setState(n),r.nextFrame=(0,l.requestFrame)(m)};this.nextFrame?((0,l.cancelFrame)(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=(0,l.requestFrame)(m)):m(),this.animationCallback=n}},e.prototype.animatedZoom=function(t){if(t){if("number"==typeof t)return this.animate({ratio:this.ratio/t});this.animate({ratio:this.ratio/(t.factor||y)},t)}else this.animate({ratio:this.ratio/y})},e.prototype.animatedUnzoom=function(t){if(t){if("number"==typeof t)return this.animate({ratio:this.ratio*t});this.animate({ratio:this.ratio*(t.factor||y)},t)}else this.animate({ratio:this.ratio*y})},e.prototype.animatedReset=function(t){this.animate({x:.5,y:.5,ratio:1,angle:0},t)},e.prototype.copy=function(){return e.from(this.getState())},e}(f.TypedEventEmitter);e.default=v},301:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cubicInOut=e.cubicOut=e.cubicIn=e.quadraticInOut=e.quadraticOut=e.quadraticIn=e.linear=void 0;e.linear=function(t){return t};e.quadraticIn=function(t){return t*t};e.quadraticOut=function(t){return t*(2-t)};e.quadraticInOut=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)};e.cubicIn=function(t){return t*t*t};e.cubicOut=function(t){return--t*t*t+1};e.cubicInOut=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)};var r={linear:e.linear,quadraticIn:e.quadraticIn,quadraticOut:e.quadraticOut,quadraticInOut:e.quadraticInOut,cubicIn:e.cubicIn,cubicOut:e.cubicOut,cubicInOut:e.cubicInOut};e.default=r},302:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,b){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(t[p]=b[p])},r(t,b)},function(t,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}),c=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),h=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),d=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&c(e,t,n);return h(e,t),e};Object.defineProperty(e,"__esModule",{value:!0});var l=d(n(303)),f=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.enabled=!0,r.draggedEvents=0,r.downStartTime=null,r.lastMouseX=null,r.lastMouseY=null,r.isMouseDown=!1,r.isMoving=!1,r.movingTimeout=null,r.startCameraState=null,r.clicks=0,r.doubleClickTimeout=null,r.currentWheelDirection=0,r.handleClick=r.handleClick.bind(r),r.handleRightClick=r.handleRightClick.bind(r),r.handleDown=r.handleDown.bind(r),r.handleUp=r.handleUp.bind(r),r.handleMove=r.handleMove.bind(r),r.handleWheel=r.handleWheel.bind(r),r.handleOut=r.handleOut.bind(r),e.addEventListener("click",r.handleClick,!1),e.addEventListener("contextmenu",r.handleRightClick,!1),e.addEventListener("mousedown",r.handleDown,!1),e.addEventListener("wheel",r.handleWheel,!1),e.addEventListener("mouseout",r.handleOut,!1),document.addEventListener("mousemove",r.handleMove,!1),document.addEventListener("mouseup",r.handleUp,!1),r}return o(e,t),e.prototype.kill=function(){var t=this.container;t.removeEventListener("click",this.handleClick),t.removeEventListener("contextmenu",this.handleRightClick),t.removeEventListener("mousedown",this.handleDown),t.removeEventListener("wheel",this.handleWheel),t.removeEventListener("mouseout",this.handleOut),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)},e.prototype.handleClick=function(t){var e=this;if(this.enabled){if(this.clicks++,2===this.clicks)return this.clicks=0,"number"==typeof this.doubleClickTimeout&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(t);setTimeout((function(){e.clicks=0,e.doubleClickTimeout=null}),300),this.draggedEvents<3&&this.emit("click",(0,l.getMouseCoords)(t,this.container))}},e.prototype.handleRightClick=function(t){this.enabled&&this.emit("rightClick",(0,l.getMouseCoords)(t,this.container))},e.prototype.handleDoubleClick=function(t){if(this.enabled){t.preventDefault(),t.stopPropagation();var e=(0,l.getMouseCoords)(t,this.container);if(this.emit("doubleClick",e),!e.sigmaDefaultPrevented){var n=this.renderer.getCamera(),r=n.getBoundedRatio(n.getState().ratio/2.2);n.animate(this.renderer.getViewportZoomedState((0,l.getPosition)(t,this.container),r),{easing:"quadraticInOut",duration:200})}}},e.prototype.handleDown=function(t){if(this.enabled){this.startCameraState=this.renderer.getCamera().getState();var e=(0,l.getPosition)(t,this.container),n=e.x,r=e.y;this.lastMouseX=n,this.lastMouseY=r,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0,this.emit("mousedown",(0,l.getMouseCoords)(t,this.container))}},e.prototype.handleUp=function(t){var e=this;if(this.enabled&&this.isMouseDown){var n=this.renderer.getCamera();this.isMouseDown=!1,"number"==typeof this.movingTimeout&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var r=(0,l.getPosition)(t,this.container),o=r.x,c=r.y,h=n.getState(),d=n.getPreviousState()||{x:0,y:0};this.isMoving?n.animate({x:h.x+3*(h.x-d.x),y:h.y+3*(h.y-d.y)},{duration:200,easing:"quadraticOut"}):this.lastMouseX===o&&this.lastMouseY===c||n.setState({x:h.x,y:h.y}),this.isMoving=!1,setTimeout((function(){e.draggedEvents=0,e.renderer.refresh()}),0),this.emit("mouseup",(0,l.getMouseCoords)(t,this.container))}},e.prototype.handleMove=function(t){var e=this;if(this.enabled){var n=(0,l.getMouseCoords)(t,this.container);if(this.emit("mousemovebody",n),t.target===this.container&&this.emit("mousemove",n),this.isMouseDown){this.isMoving=!0,this.draggedEvents++,"number"==typeof this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout((function(){e.movingTimeout=null,e.isMoving=!1}),100);var r=this.renderer.getCamera(),o=(0,l.getPosition)(t,this.container),c=o.x,h=o.y,d=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),f=this.renderer.viewportToFramedGraph({x:c,y:h}),y=d.x-f.x,v=d.y-f.y,m=r.getState(),w=m.x+y,_=m.y+v;r.setState({x:w,y:_}),this.lastMouseX=c,this.lastMouseY=h,t.preventDefault(),t.stopPropagation()}}},e.prototype.handleWheel=function(t){var e=this;if(this.enabled){t.preventDefault(),t.stopPropagation();var n=(0,l.getWheelDelta)(t);if(n){var r=(0,l.getWheelCoords)(t,this.container);if(this.emit("wheel",r),!r.sigmaDefaultPrevented){var o=n>0?1/1.7:1.7,c=this.renderer.getCamera(),h=c.getBoundedRatio(c.getState().ratio*o),d=n>0?1:-1,f=Date.now();this.currentWheelDirection===d&&this.lastWheelTriggerTime&&f-this.lastWheelTriggerTime<50||(c.animate(this.renderer.getViewportZoomedState((0,l.getPosition)(t,this.container),h),{easing:"quadraticOut",duration:250},(function(){e.currentWheelDirection=0})),this.currentWheelDirection=d,this.lastWheelTriggerTime=f)}}}},e.prototype.handleOut=function(){},e}(l.default);e.default=f},303:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,b){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(t[p]=b[p])},r(t,b)},function(t,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}),c=this&&this.__assign||function(){return c=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},c.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.getWheelDelta=e.getTouchCoords=e.getTouchesArray=e.getWheelCoords=e.getMouseCoords=e.getPosition=void 0;var h=n(281);function d(t,e){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}function l(t,e){return c(c({},d(t,e)),{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){this.sigmaDefaultPrevented=!0},original:t})}e.getPosition=d,e.getMouseCoords=l,e.getWheelCoords=function(t,e){return c(c({},l(t,e)),{delta:y(t)})};function f(t){for(var e=[],i=0,n=Math.min(t.length,2);i<n;i++)e.push(t[i]);return e}function y(t){if(void 0!==t.deltaY)return-3*t.deltaY/360;if(void 0!==t.detail)return t.detail/-9;throw new Error("Captor: could not extract delta from event.")}e.getTouchesArray=f,e.getTouchCoords=function(t,e){return{touches:f(t.touches).map((function(t){return d(t,e)})),original:t}},e.getWheelDelta=y;var v=function(t){function e(e,n){var r=t.call(this)||this;return r.container=e,r.renderer=n,r}return o(e,t),e}(h.TypedEventEmitter);e.default=v},304:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)c.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c},o=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.rectangleCollidesWithQuad=e.squareCollidesWithQuad=e.getCircumscribedAlignedRectangle=e.isRectangleAligned=void 0;var h=c(n(315)),d=!1;function l(rect){return rect.x1===rect.x2||rect.y1===rect.y2}function f(rect){var t=Math.sqrt(Math.pow(rect.x2-rect.x1,2)+Math.pow(rect.y2-rect.y1,2)),e=(rect.y1-rect.y2)*rect.height/t,n=(rect.x2-rect.x1)*rect.height/t,r={x:rect.x1,y:rect.y1},tr={x:rect.x2,y:rect.y2},o={x:rect.x1+e,y:rect.y1+n},br={x:rect.x2+e,y:rect.y2+n},c=Math.min(r.x,tr.x,o.x,br.x),h=Math.max(r.x,tr.x,o.x,br.x),d=Math.min(r.y,tr.y,o.y,br.y);return{x1:c,y1:d,x2:h,y2:d,height:Math.max(r.y,tr.y,o.y,br.y)-d}}function y(t,e,n,r,o,c,h){return t<r+c&&t+n>r&&e<o+h&&e+n>o}function v(t,e,n,r,o,c,h,d){return t<o+h&&t+n>o&&e<c+d&&e+r>c}function m(t,e,n,r,o,c){var h=t<n+o/2;return e<r+c/2?h?1:2:h?3:4}e.isRectangleAligned=l,e.getCircumscribedAlignedRectangle=f,e.squareCollidesWithQuad=y,e.rectangleCollidesWithQuad=v;var w=function(){function t(t){var e;void 0===t&&(t={}),this.containers=((e={}).outside=[],e),this.cache=null,this.lastRectangle=null;var n=Math.pow(4,5);this.data=new Float32Array((4*n-1)/3*4),t.boundaries?this.resize(t.boundaries):this.resize({x:0,y:0,width:1,height:1})}return t.prototype.add=function(t,e,n,r){return function(t,data,e,n,r,o,c){for(var h=r-c,l=o-c,f=2*c,v=0,m=0;;){if(v>=t)return e[m]=e[m]||[],void e[m].push(n);var w=4*m+4,_=4*m+8,x=4*m+12,E=4*m+16,L=y(h,l,f,data[w+0],data[w+1],data[w+2],data[w+3]),A=y(h,l,f,data[_+0],data[_+1],data[_+2],data[_+3]),k=y(h,l,f,data[x+0],data[x+1],data[x+2],data[x+3]),G=y(h,l,f,data[E+0],data[E+1],data[E+2],data[E+3]),S=[L,A,k,G].reduce((function(t,e){return e?t+1:t}),0);if(0===S&&0===v)return e.outside.push(n),void(!d&&e.outside.length>=5&&(d=!0,console.warn("sigma/quadtree.insertNode: At least 5 nodes are outside the global quadtree zone. You might have a problem with the normalization function or the custom bounding box.")));if(0===S)throw new Error("sigma/quadtree.insertNode: no collision (level: ".concat(v,", key: ").concat(n,", x: ").concat(r,", y: ").concat(o,", size: ").concat(c,")."));if(3===S)throw new Error("sigma/quadtree.insertNode: 3 impossible collisions (level: ".concat(v,", key: ").concat(n,", x: ").concat(r,", y: ").concat(o,", size: ").concat(c,")."));if(S>1)return e[m]=e[m]||[],void e[m].push(n);v++,L&&(m=w),A&&(m=_),k&&(m=x),G&&(m=E)}}(5,this.data,this.containers,t,e,n,r),this},t.prototype.resize=function(t){this.clear(),this.data[0]=t.x,this.data[1]=t.y,this.data[2]=t.width,this.data[3]=t.height,function(t,data){for(var e=[0,0];e.length;){var n=e.pop(),r=e.pop(),o=4*r+4,c=4*r+8,h=4*r+12,d=4*r+16,l=data[r+0],f=data[r+1],y=data[r+2]/2,v=data[r+3]/2;data[o+0]=l,data[o+1]=f,data[o+2]=y,data[o+3]=v,data[c+0]=l+y,data[c+1]=f,data[c+2]=y,data[c+3]=v,data[h+0]=l,data[h+1]=f+v,data[h+2]=y,data[h+3]=v,data[d+0]=l+y,data[d+1]=f+v,data[d+2]=y,data[d+3]=v,n<t-1&&(e.push(d,n+1),e.push(h,n+1),e.push(c,n+1),e.push(o,n+1))}}(5,this.data)},t.prototype.clear=function(){var t;return this.containers=((t={}).outside=[],t),this},t.prototype.point=function(t,e){var n=this.containers.outside,c=0,h=0;do{this.containers[c]&&n.push.apply(n,o([],r(this.containers[c]),!1)),c=4*c+4*m(t,e,this.data[c+0],this.data[c+1],this.data[c+2],this.data[c+3]),h++}while(h<=5);return n},t.prototype.rectangle=function(t,e,n,c,d){var y,m=this.lastRectangle;return m&&t===m.x1&&n===m.x2&&e===m.y1&&c===m.y2&&d===m.height||(this.lastRectangle={x1:t,y1:e,x2:n,y2:c,height:d},l(this.lastRectangle)||(this.lastRectangle=f(this.lastRectangle)),this.cache=function(t,data,e,n,r,o,c){for(var d,l=[0,0],f=[];l.length;){var y=l.pop(),m=l.pop();if((d=e[m])&&(0,h.default)(f,d),!(y>=t)){var w=4*m+4,_=4*m+8,x=4*m+12,E=4*m+16,L=v(n,r,o,c,data[w+0],data[w+1],data[w+2],data[w+3]),A=v(n,r,o,c,data[_+0],data[_+1],data[_+2],data[_+3]),k=v(n,r,o,c,data[x+0],data[x+1],data[x+2],data[x+3]),G=v(n,r,o,c,data[E+0],data[E+1],data[E+2],data[E+3]);L&&l.push(w,y+1),A&&l.push(_,y+1),k&&l.push(x,y+1),G&&l.push(E,y+1)}}return f}(5,this.data,this.containers,t,e,Math.abs(t-n)||Math.abs(e-c),d),(y=this.cache).push.apply(y,o([],r(this.containers.outside),!1))),this.cache},t}();e.default=w},305:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,data,e){if(data.label){var n=e.labelSize,r=e.labelFont,o=e.labelWeight,c=e.labelColor.attribute?data[e.labelColor.attribute]||e.labelColor.color||"#000":e.labelColor.color;t.fillStyle=c,t.font="".concat(o," ").concat(n,"px ").concat(r),t.fillText(data.label,data.x+data.size+3,data.y+n/3)}}},306:function(t,e){(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};e.r(n),e.d(n,{default:()=>r});const r="precision mediump float;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float feather = 0.001;\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\n\nvoid main(void) {\n  float dist = length(v_normal) * v_thickness;\n\n  float t = smoothstep(\n    v_thickness - feather,\n    v_thickness,\n    dist\n  );\n\n  gl_FragColor = mix(v_color, transparent, t);\n}";t.exports=n})()},307:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,b){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(t[p]=b[p])},r(t,b)},function(t,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}),c=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)c.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c},h=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},d=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var l=n(280),f=d(n(334)),y=d(n(335)),v=n(284);!function(t){function e(e,n){return t.call(this,e,f.default,y.default,1,8)||this}o(e,t),e.prototype.bind=function(){},e.prototype.process=function(data,t,e){},e.prototype.render=function(t){},e.prototype.rebindTexture=function(){}}(v.AbstractNodeProgram);e.default=function(){var t,e=[],n={},r=!1,d=void 0;function m(o){if(!n[o]){var image=new Image;image.addEventListener("load",(function(){n[o]={status:"pending",image:image},"number"!=typeof d&&(d=requestAnimationFrame((function(){return function(){d=void 0;var o=[];for(var l in n){var f=n[l];"pending"===f.status&&o.push({id:l,image:f.image,size:Math.min(f.image.width,f.image.height)||1})}var canvas=document.createElement("canvas"),y=canvas.getContext("2d");canvas.width=o.reduce((function(t,e){return t+e.size}),r?t.width:0),canvas.height=Math.max.apply(Math,h([r?t.height:0],c(o.map((function(t){return t.size}))),!1));var v=0;r&&(y.putImageData(t,0,0),v=t.width);o.forEach((function(t){var e=t.id,image=t.image,r=t.size,o=Math.min(100,r),c=0,h=0;(image.width||0)>(image.height||0)?c=(image.width-image.height)/2:h=(image.height-image.width)/2,y.drawImage(image,c,h,r,r,v,0,o,o),n[e]={status:"ready",x:v,y:0,width:o,height:o},v+=o})),t=y.getImageData(0,0,canvas.width,canvas.height),r=!0,e.forEach((function(t){return t()}))}()})))})),image.addEventListener("error",(function(){n[o]={status:"error"}})),n[o]={status:"loading"},image.setAttribute("crossOrigin",""),image.src=o}}return function(r){function c(n,o){var c=r.call(this,n,f.default,y.default,1,8)||this;e.push((function(){c&&c.rebindTexture&&c.rebindTexture(),o&&o.refresh&&o.refresh()})),t=new ImageData(1,1),c.textureLocation=n.getAttribLocation(c.program,"a_texture");var h=n.getUniformLocation(c.program,"u_atlas");if(null===h)throw new Error("NodeProgramImage: error while getting atlasLocation");return c.atlasLocation=h,c.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,c.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,new Uint8Array([0,0,0,0])),c.bind(),c}return o(c,r),c.prototype.bind=function(){r.prototype.bind.call(this);var t=this.gl;t.enableVertexAttribArray(this.textureLocation),t.vertexAttribPointer(this.textureLocation,4,t.FLOAT,!1,this.attributes*Float32Array.BYTES_PER_ELEMENT,16)},c.prototype.process=function(data,e,r){var o=this.array,i=1*r*8,c=data.image,h=c&&n[c];if("string"!=typeof c||h||m(c),e)return o[i++]=0,o[i++]=0,o[i++]=0,o[i++]=0,o[i++]=0,o[i++]=0,o[i++]=0,void(o[i++]=0);if(o[i++]=data.x,o[i++]=data.y,o[i++]=data.size,o[i++]=(0,l.floatColor)(data.color),h&&"ready"===h.status){var d=t.width,f=t.height;o[i++]=h.x/d,o[i++]=h.y/f,o[i++]=h.width/d,o[i++]=h.height/f}else o[i++]=0,o[i++]=0,o[i++]=0,o[i++]=0},c.prototype.render=function(t){if(!this.hasNothingToRender()){this.latestRenderParams=t;var e=this.gl,n=this.program;e.useProgram(n),e.uniform1f(this.ratioLocation,1/Math.sqrt(t.ratio)),e.uniform1f(this.scaleLocation,t.scalingRatio),e.uniformMatrix3fv(this.matrixLocation,!1,t.matrix),e.uniform1i(this.atlasLocation,0),e.drawArrays(e.POINTS,0,this.array.length/8)}},c.prototype.rebindTexture=function(){var e=this.gl;e.bindTexture(e.TEXTURE_2D,this.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.generateMipmap(e.TEXTURE_2D),this.latestRenderParams&&(this.bind(),this.bufferData(),this.render(this.latestRenderParams))},c}(v.AbstractNodeProgram)}},308:function(t,e,n){const r=n(299),o=n(337),c=n(338),h=n(340),d=n(341);function l(t,e){if(!r(t))throw new Error("graphology-layout-force/worker: the given graph is not a valid graphology instance.");e=o(e,d),this.callbacks={},e.onConverged&&(this.callbacks.onConverged=e.onConverged),this.graph=t,this.params=e,this.nodeStates={},this.frameID=null,this.running=!1,this.killed=!1}l.prototype.isRunning=function(){return this.running},l.prototype.runFrame=function(){let{converged:t}=c(this.graph,this.nodeStates,this.params);h.assignLayoutChanges(this.graph,this.nodeStates,this.params),t=!1,t?(this.callbacks.onConverged&&this.callbacks.onConverged(),this.stop()):this.frameID=window.requestAnimationFrame((()=>this.runFrame()))},l.prototype.stop=function(){return this.running=!1,null!==this.frameID&&(window.cancelAnimationFrame(this.frameID),this.frameID=null),this},l.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-force/worker.start: layout was killed.");this.running||(this.running=!0,this.runFrame())},l.prototype.kill=function(){this.stop(),delete this.nodeStates,this.killed=!0},t.exports=l},311:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,b){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(t[p]=b[p])},r(t,b)},function(t,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}),c=this&&this.__assign||function(){return c=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},c.apply(this,arguments)},h=this&&this.__values||function(t){var s="function"==typeof Symbol&&Symbol.iterator,e=s&&t[s],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},d=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var l=d(n(298)),f=d(n(302)),y=d(n(304)),v=n(281),m=n(280),w=n(316),_=n(317),x=d(n(332)),E=n(300),L=n(333),A=(0,m.getPixelRatio)();function k(t,e,data){if(!data.hasOwnProperty("x")||!data.hasOwnProperty("y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(e,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return data.color||(data.color=t.defaultNodeColor),data.label||""===data.label||(data.label=null),void 0!==data.label&&null!==data.label?data.label=""+data.label:data.label=null,data.size||(data.size=2),data.hasOwnProperty("hidden")||(data.hidden=!1),data.hasOwnProperty("highlighted")||(data.highlighted=!1),data.hasOwnProperty("forceLabel")||(data.forceLabel=!1),data.type&&""!==data.type||(data.type=t.defaultNodeType),data.zIndex||(data.zIndex=0),data}function G(t,e,data){return data.color||(data.color=t.defaultEdgeColor),data.label||(data.label=""),data.size||(data.size=.5),data.hasOwnProperty("hidden")||(data.hidden=!1),data.hasOwnProperty("forceLabel")||(data.forceLabel=!1),data.type&&""!==data.type||(data.type=t.defaultEdgeType),data.zIndex||(data.zIndex=0),data}var S=function(t){function e(e,n,r){void 0===r&&(r={});var o=t.call(this)||this;if(o.elements={},o.canvasContexts={},o.webGLContexts={},o.activeListeners={},o.quadtree=new y.default,o.labelGrid=new w.LabelGrid,o.nodeDataCache={},o.edgeDataCache={},o.nodesWithForcedLabels=[],o.edgesWithForcedLabels=[],o.nodeKeyToIndex={},o.edgeKeyToIndex={},o.nodeExtent={x:[0,1],y:[0,1]},o.matrix=(0,E.identity)(),o.invMatrix=(0,E.identity)(),o.correctionRatio=1,o.customBBox=null,o.normalizationFunction=(0,m.createNormalizationFunction)({x:[-1/0,1/0],y:[-1/0,1/0]}),o.cameraSizeRatio=1,o.width=0,o.height=0,o.displayedLabels=new Set,o.highlightedNodes=new Set,o.hoveredNode=null,o.hoveredEdge=null,o.renderFrame=null,o.renderHighlightedNodesFrame=null,o.needToProcess=!1,o.needToSoftProcess=!1,o.checkEdgesEventsFrame=null,o.nodePrograms={},o.hoverNodePrograms={},o.edgePrograms={},o.settings=(0,m.assign)({},_.DEFAULT_SETTINGS,r),(0,_.validateSettings)(o.settings),(0,m.validateGraph)(e),!(n instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");for(var c in o.graph=e,o.container=n,o.initializeCache(),o.createWebGLContext("edges",{preserveDrawingBuffer:!0}),o.createCanvasContext("edgeLabels"),o.createWebGLContext("nodes"),o.createCanvasContext("labels"),o.createCanvasContext("hovers"),o.createWebGLContext("hoverNodes"),o.createCanvasContext("mouse"),o.webGLContexts){var h=o.webGLContexts[c];h.blendFunc(h.ONE,h.ONE_MINUS_SRC_ALPHA),h.enable(h.BLEND)}for(var d in o.settings.nodeProgramClasses){var v=o.settings.nodeProgramClasses[d];o.nodePrograms[d]=new v(o.webGLContexts.nodes,o),o.hoverNodePrograms[d]=new v(o.webGLContexts.hoverNodes,o)}for(var d in o.settings.edgeProgramClasses){var L=o.settings.edgeProgramClasses[d];o.edgePrograms[d]=new L(o.webGLContexts.edges,o)}return o.resize(),o.camera=new l.default,o.bindCameraHandlers(),o.mouseCaptor=new f.default(o.elements.mouse,o),o.touchCaptor=new x.default(o.elements.mouse,o),o.bindEventHandlers(),o.bindGraphHandlers(),o.handleSettingsUpdate(),o.process(),o.render(),o}return o(e,t),e.prototype.createCanvas=function(t){var canvas=(0,m.createElement)("canvas",{position:"absolute"},{class:"sigma-".concat(t)});return this.elements[t]=canvas,this.container.appendChild(canvas),canvas},e.prototype.createCanvasContext=function(t){var canvas=this.createCanvas(t);return this.canvasContexts[t]=canvas.getContext("2d",{preserveDrawingBuffer:!1,antialias:!1}),this},e.prototype.createWebGLContext=function(t,e){var n,canvas=this.createCanvas(t),r=c({preserveDrawingBuffer:!1,antialias:!1},e||{});return(n=canvas.getContext("webgl2",r))||(n=canvas.getContext("webgl",r)),n||(n=canvas.getContext("experimental-webgl",r)),this.webGLContexts[t]=n,this},e.prototype.initializeCache=function(){var t=this,e=this.graph,i=0;e.forEachNode((function(e){t.nodeKeyToIndex[e]=i++})),i=0,e.forEachEdge((function(e){t.edgeKeyToIndex[e]=i++}))},e.prototype.bindCameraHandlers=function(){var t=this;return this.activeListeners.camera=function(){t._scheduleRefresh()},this.camera.on("updated",this.activeListeners.camera),this},e.prototype.bindEventHandlers=function(){var t=this;this.activeListeners.handleResize=function(){t.needToSoftProcess=!0,t._scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize);var e=function(t,e,n,r,o){return t>n-o&&t<n+o&&e>r-o&&e<r+o&&Math.sqrt(Math.pow(t-n,2)+Math.pow(e-r,2))<o};this.activeListeners.handleMove=function(n){for(var r,o,h,d=(r=n.x,o=n.y,h=t.viewportToFramedGraph({x:r,y:o}),t.quadtree.point(h.x,1-h.y)),l={event:n,preventSigmaDefault:function(){this.event.preventSigmaDefault()}},f=1/0,y=null,i=0,v=d.length;i<v;i++){var w=d[i],data=t.nodeDataCache[w],_=t.framedGraphToViewport(data),x=t.scaleSize(data.size);if(!data.hidden&&e(n.x,n.y,_.x,_.y,x)){var E=Math.sqrt(Math.pow(n.x-_.x,2)+Math.pow(n.y-_.y,2));E<f&&(f=E,y=w)}}if(y&&t.hoveredNode!==y&&!t.nodeDataCache[y].hidden)return t.hoveredNode&&t.emit("leaveNode",c(c({},l),{node:t.hoveredNode})),t.hoveredNode=y,t.emit("enterNode",c(c({},l),{node:y})),void t.scheduleHighlightedNodesRender();if(t.hoveredNode){data=t.nodeDataCache[t.hoveredNode],_=t.framedGraphToViewport(data),x=t.scaleSize(data.size);if(!e(n.x,n.y,_.x,_.y,x)){w=t.hoveredNode;return t.hoveredNode=null,t.emit("leaveNode",c(c({},l),{node:w})),t.scheduleHighlightedNodesRender()}}!0===t.settings.enableEdgeHoverEvents?t.checkEdgeHoverEvents(l):"debounce"===t.settings.enableEdgeHoverEvents&&(t.checkEdgesEventsFrame||(t.checkEdgesEventsFrame=(0,m.requestFrame)((function(){t.checkEdgeHoverEvents(l),t.checkEdgesEventsFrame=null}))))};var n=function(e){return function(n){var r={event:n,preventSigmaDefault:function(){this.event.preventSigmaDefault()}};if(t.hoveredNode)return t.emit("".concat(e,"Node"),c(c({},r),{node:t.hoveredNode}));if("wheel"===e?t.settings.enableEdgeWheelEvents:t.settings.enableEdgeClickEvents){var o=t.getEdgeAtPoint(n.x,n.y);if(o)return t.emit("".concat(e,"Edge"),c(c({},r),{edge:o}))}return t.emit("".concat(e,"Stage"),r)}};return this.activeListeners.handleClick=n("click"),this.activeListeners.handleRightClick=n("rightClick"),this.activeListeners.handleDoubleClick=n("doubleClick"),this.activeListeners.handleWheel=n("wheel"),this.activeListeners.handleDown=n("down"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this},e.prototype.bindGraphHandlers=function(){var t=this,e=this.graph;return this.activeListeners.graphUpdate=function(){t.needToProcess=!0,t._scheduleRefresh()},this.activeListeners.softGraphUpdate=function(){t.needToSoftProcess=!0,t._scheduleRefresh()},this.activeListeners.addNodeGraphUpdate=function(n){t.nodeKeyToIndex[n.key]=e.order-1,t.activeListeners.graphUpdate()},this.activeListeners.addEdgeGraphUpdate=function(n){t.nodeKeyToIndex[n.key]=e.order-1,t.activeListeners.graphUpdate()},e.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),e.on("nodeDropped",this.activeListeners.graphUpdate),e.on("nodeAttributesUpdated",this.activeListeners.softGraphUpdate),e.on("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),e.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),e.on("edgeDropped",this.activeListeners.graphUpdate),e.on("edgeAttributesUpdated",this.activeListeners.softGraphUpdate),e.on("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),e.on("edgesCleared",this.activeListeners.graphUpdate),e.on("cleared",this.activeListeners.graphUpdate),this},e.prototype.checkEdgeHoverEvents=function(t){var e=this.hoveredNode?null:this.getEdgeAtPoint(t.event.x,t.event.y);return e!==this.hoveredEdge&&(this.hoveredEdge&&this.emit("leaveEdge",c(c({},t),{edge:this.hoveredEdge})),e&&this.emit("enterEdge",c(c({},t),{edge:e})),this.hoveredEdge=e),this},e.prototype.getEdgeAtPoint=function(t,e){var n,r,o=this,c=this.edgeDataCache,d=this.nodeDataCache;if(!(0,L.isPixelColored)(this.webGLContexts.edges,t*A,e*A))return null;var l=this.viewportToGraph({x:t,y:e}),f=l.x,y=l.y,v=0;if(this.graph.someEdge((function(t,e,n,r,h,l){var f=h.x,y=h.y,m=l.x,w=l.y;if(c[t].hidden||d[n].hidden||d[r].hidden)return!1;if(f!==m||y!==w){var _=Math.sqrt(Math.pow(m-f,2)+Math.pow(w-y,2)),x=o.graphToViewport({x:f,y:y}),E=x.x,L=x.y,A=o.graphToViewport({x:m,y:w}),k=A.x,G=A.y,S=Math.sqrt(Math.pow(k-E,2)+Math.pow(G-L,2));return v=_/S,!0}})),!v)return null;var m=this.graph.filterEdges((function(t,e,n,r,h,l){return!(c[t].hidden||d[n].hidden||d[r].hidden)&&(!!(0,L.doEdgeCollideWithPoint)(f,y,h.x,h.y,l.x,l.y,c[t].size*v/o.cameraSizeRatio)||void 0)}));if(0===m.length)return null;var w=m[m.length-1],_=-1/0;try{for(var x=h(m),E=x.next();!E.done;E=x.next()){var k=E.value,G=this.graph.getEdgeAttribute(k,"zIndex");G>=_&&(w=k,_=G)}}catch(t){n={error:t}}finally{try{E&&!E.done&&(r=x.return)&&r.call(x)}finally{if(n)throw n.error}}return w},e.prototype.process=function(t){var e=this;void 0===t&&(t=!1);var n=this.graph,r=this.settings,o=this.getDimensions(),c=[1/0,-1/0],h=[1/0,-1/0];this.quadtree.clear(),this.labelGrid.resizeAndClear(o,r.labelGridCellSize),this.highlightedNodes=new Set,this.nodeExtent=(0,m.graphExtent)(n),this.nodesWithForcedLabels=[],this.edgesWithForcedLabels=[];var d=new l.default,f=(0,m.matrixFromCamera)(d.getState(),this.getDimensions(),this.getGraphDimensions(),this.getSetting("stagePadding")||0);this.normalizationFunction=(0,m.createNormalizationFunction)(this.customBBox||this.nodeExtent);for(var y={},v=n.nodes(),i=0,w=v.length;i<w;i++){var _=v[i],x=Object.assign({},n.getNodeAttributes(_));r.nodeReducer&&(x=r.nodeReducer(_,x)),y[(data=k(this.settings,_,x)).type]=(y[data.type]||0)+1,this.nodeDataCache[_]=data,this.normalizationFunction.applyTo(data),data.forceLabel&&this.nodesWithForcedLabels.push(_),this.settings.zIndex&&(data.zIndex<c[0]&&(c[0]=data.zIndex),data.zIndex>c[1]&&(c[1]=data.zIndex))}for(var E in this.nodePrograms){if(!this.nodePrograms.hasOwnProperty(E))throw new Error('Sigma: could not find a suitable program for node type "'.concat(E,'"!'));t||this.nodePrograms[E].allocate(y[E]||0),y[E]=0}this.settings.zIndex&&c[0]!==c[1]&&(v=(0,m.zIndexOrdering)(c,(function(t){return e.nodeDataCache[t].zIndex}),v));for(i=0,w=v.length;i<w;i++){_=v[i];var data=this.nodeDataCache[_];this.quadtree.add(_,data.x,1-data.y,data.size/this.width),"string"!=typeof data.label||data.hidden||this.labelGrid.add(_,data.size,this.framedGraphToViewport(data,{matrix:f})),this.nodePrograms[data.type].process(data,data.hidden,y[data.type]++),data.highlighted&&!data.hidden&&this.highlightedNodes.add(_),this.nodeKeyToIndex[_]=i}this.labelGrid.organize();var L={},A=n.edges();for(i=0,w=A.length;i<w;i++){var S=A[i];x=Object.assign({},n.getEdgeAttributes(S));r.edgeReducer&&(x=r.edgeReducer(S,x)),L[(data=G(this.settings,0,x)).type]=(L[data.type]||0)+1,this.edgeDataCache[S]=data,data.forceLabel&&!data.hidden&&this.edgesWithForcedLabels.push(S),this.settings.zIndex&&(data.zIndex<h[0]&&(h[0]=data.zIndex),data.zIndex>h[1]&&(h[1]=data.zIndex))}for(var E in this.edgePrograms){if(!this.edgePrograms.hasOwnProperty(E))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(E,'"!'));t||this.edgePrograms[E].allocate(L[E]||0),L[E]=0}this.settings.zIndex&&h[0]!==h[1]&&(A=(0,m.zIndexOrdering)(h,(function(t){return e.edgeDataCache[t].zIndex}),A));for(i=0,w=A.length;i<w;i++){S=A[i],data=this.edgeDataCache[S];var C=n.extremities(S),T=this.nodeDataCache[C[0]],P=this.nodeDataCache[C[1]],D=data.hidden||T.hidden||P.hidden;this.edgePrograms[data.type].process(T,P,data,D,L[data.type]++),this.nodeKeyToIndex[S]=i}for(var E in this.edgePrograms){var M=this.edgePrograms[E];t||"function"!=typeof M.computeIndices||M.computeIndices()}return this},e.prototype.handleSettingsUpdate=function(){return this.camera.minRatio=this.settings.minCameraRatio,this.camera.maxRatio=this.settings.maxCameraRatio,this.camera.setState(this.camera.validateState(this.camera.getState())),this},e.prototype._refresh=function(){return this.needToProcess?this.process():this.needToSoftProcess&&this.process(!0),this.needToProcess=!1,this.needToSoftProcess=!1,this.render(),this},e.prototype._scheduleRefresh=function(){var t=this;return this.renderFrame||(this.renderFrame=(0,m.requestFrame)((function(){t._refresh(),t.renderFrame=null}))),this},e.prototype.renderLabels=function(){if(!this.settings.renderLabels)return this;var t,e=this.camera.getState();if(e.ratio>=1)t=new Set(this.graph.nodes());else{var n=this.viewRectangle();t=new Set(this.quadtree.rectangle(n.x1,1-n.y1,n.x2,1-n.y2,n.height))}var r=this.labelGrid.getLabelsToDisplay(e.ratio,this.settings.labelDensity).concat(this.nodesWithForcedLabels);this.displayedLabels=new Set;for(var o=this.canvasContexts.labels,i=0,h=r.length;i<h;i++){var d=r[i],data=this.nodeDataCache[d];if(!this.displayedLabels.has(d)&&!data.hidden){var l=this.framedGraphToViewport(data),f=l.x,y=l.y,v=this.scaleSize(data.size);!data.forceLabel&&v<this.settings.labelRenderedSizeThreshold||t.has(d)&&(this.displayedLabels.add(d),this.settings.labelRenderer(o,c(c({key:d},data),{size:v,x:f,y:y}),this.settings))}}return this},e.prototype.renderEdgeLabels=function(){if(!this.settings.renderEdgeLabels)return this;var t=this.canvasContexts.edgeLabels;t.clearRect(0,0,this.width,this.height);for(var e=(0,w.edgeLabelsToDisplayFromNodes)({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedLabels,highlightedNodes:this.highlightedNodes}).concat(this.edgesWithForcedLabels),n=new Set,i=0,r=e.length;i<r;i++){var o=e[i],h=this.graph.extremities(o),d=this.nodeDataCache[h[0]],l=this.nodeDataCache[h[1]],f=this.edgeDataCache[o];n.has(o)||(f.hidden||d.hidden||l.hidden||(this.settings.edgeLabelRenderer(t,c(c({key:o},f),{size:this.scaleSize(f.size)}),c(c(c({key:h[0]},d),this.framedGraphToViewport(d)),{size:this.scaleSize(d.size)}),c(c(c({key:h[1]},l),this.framedGraphToViewport(l)),{size:this.scaleSize(l.size)}),this.settings),n.add(o)))}return this},e.prototype.renderHighlightedNodes=function(){var t=this,e=this.canvasContexts.hovers;e.clearRect(0,0,this.width,this.height);var n=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&n.push(this.hoveredNode),this.highlightedNodes.forEach((function(e){e!==t.hoveredNode&&n.push(e)})),n.forEach((function(n){return function(n){var data=t.nodeDataCache[n],r=t.framedGraphToViewport(data),o=r.x,h=r.y,d=t.scaleSize(data.size);t.settings.hoverRenderer(e,c(c({key:n},data),{size:d,x:o,y:h}),t.settings)}(n)}));var r={};for(var o in n.forEach((function(e){var n=t.nodeDataCache[e].type;r[n]=(r[n]||0)+1})),this.hoverNodePrograms)this.hoverNodePrograms[o].allocate(r[o]||0),r[o]=0;for(var o in n.forEach((function(e){var data=t.nodeDataCache[e];t.hoverNodePrograms[data.type].process(data,data.hidden,r[data.type]++)})),this.hoverNodePrograms){var h=this.hoverNodePrograms[o];h.bind(),h.bufferData(),h.render({matrix:this.matrix,width:this.width,height:this.height,ratio:this.camera.ratio,correctionRatio:this.correctionRatio/this.camera.ratio,scalingRatio:A})}},e.prototype.scheduleHighlightedNodesRender=function(){var t=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=(0,m.requestFrame)((function(){t.renderHighlightedNodesFrame=null,t.renderHighlightedNodes(),t.renderEdgeLabels()})))},e.prototype.render=function(){if(this.renderFrame&&((0,m.cancelFrame)(this.renderFrame),this.renderFrame=null,this.needToProcess=!1,this.needToSoftProcess=!1),this.resize(),this.clear(),this.updateCachedValues(),!this.graph.order)return this;var t=this.mouseCaptor,e=this.camera.isAnimated()||t.isMoving||t.draggedEvents||t.currentWheelDirection,n=this.camera.getState(),r=this.getDimensions(),o=this.getGraphDimensions(),c=this.getSetting("stagePadding")||0;for(var h in this.matrix=(0,m.matrixFromCamera)(n,r,o,c),this.invMatrix=(0,m.matrixFromCamera)(n,r,o,c,!0),this.correctionRatio=(0,m.getMatrixImpact)(this.matrix,n,r),this.nodePrograms){(d=this.nodePrograms[h]).bind(),d.bufferData(),d.render({matrix:this.matrix,width:this.width,height:this.height,ratio:n.ratio,correctionRatio:this.correctionRatio/n.ratio,scalingRatio:A})}if(!this.settings.hideEdgesOnMove||!e)for(var h in this.edgePrograms){var d;(d=this.edgePrograms[h]).bind(),d.bufferData(),d.render({matrix:this.matrix,width:this.width,height:this.height,ratio:n.ratio,correctionRatio:this.correctionRatio/n.ratio,scalingRatio:A})}return this.settings.hideLabelsOnMove&&e||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes(),this.emit("afterRender")),this},e.prototype.updateCachedValues=function(){var t=this.camera.getState().ratio;this.cameraSizeRatio=Math.sqrt(t)},e.prototype.getCamera=function(){return this.camera},e.prototype.getGraph=function(){return this.graph},e.prototype.getMouseCaptor=function(){return this.mouseCaptor},e.prototype.getTouchCaptor=function(){return this.touchCaptor},e.prototype.getDimensions=function(){return{width:this.width,height:this.height}},e.prototype.getGraphDimensions=function(){var t=this.customBBox||this.nodeExtent;return{width:t.x[1]-t.x[0]||1,height:t.y[1]-t.y[0]||1}},e.prototype.getNodeDisplayData=function(t){var e=this.nodeDataCache[t];return e?Object.assign({},e):void 0},e.prototype.getEdgeDisplayData=function(t){var e=this.edgeDataCache[t];return e?Object.assign({},e):void 0},e.prototype.getSettings=function(){return c({},this.settings)},e.prototype.getSetting=function(t){return this.settings[t]},e.prototype.setSetting=function(t,e){return this.settings[t]=e,(0,_.validateSettings)(this.settings),this.handleSettingsUpdate(),this.needToProcess=!0,this._scheduleRefresh(),this},e.prototype.updateSetting=function(t,e){return this.settings[t]=e(this.settings[t]),(0,_.validateSettings)(this.settings),this.handleSettingsUpdate(),this.needToProcess=!0,this._scheduleRefresh(),this},e.prototype.resize=function(){var t=this.width,e=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,0===this.width)throw new Error("Sigma: container has no width.");if(0===this.height)throw new Error("Sigma: container has no height.");if(t===this.width&&e===this.height)return this;for(var n in this.elements){var element=this.elements[n];element.style.width=this.width+"px",element.style.height=this.height+"px"}for(var n in this.canvasContexts)this.elements[n].setAttribute("width",this.width*A+"px"),this.elements[n].setAttribute("height",this.height*A+"px"),1!==A&&this.canvasContexts[n].scale(A,A);for(var n in this.webGLContexts)this.elements[n].setAttribute("width",this.width*A+"px"),this.elements[n].setAttribute("height",this.height*A+"px"),this.webGLContexts[n].viewport(0,0,this.width*A,this.height*A);return this},e.prototype.clear=function(){return this.webGLContexts.nodes.clear(this.webGLContexts.nodes.COLOR_BUFFER_BIT),this.webGLContexts.edges.clear(this.webGLContexts.edges.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(this.webGLContexts.nodes.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this},e.prototype.refresh=function(){return this.needToProcess=!0,this._refresh(),this},e.prototype.scheduleRefresh=function(){return this.needToProcess=!0,this._scheduleRefresh(),this},e.prototype.getViewportZoomedState=function(t,e){var n=this.camera.getState(),r=n.ratio,o=n.angle,c=n.x,h=n.y,d=e/r,l={x:this.width/2,y:this.height/2},f=this.viewportToFramedGraph(t),y=this.viewportToFramedGraph(l);return{angle:o,x:(f.x-y.x)*(1-d)+c,y:(f.y-y.y)*(1-d)+h,ratio:e}},e.prototype.viewRectangle=function(){var t=0*this.width/8,e=0*this.height/8,n=this.viewportToFramedGraph({x:0-t,y:0-e}),r=this.viewportToFramedGraph({x:this.width+t,y:0-e}),o=this.viewportToFramedGraph({x:0,y:this.height+e});return{x1:n.x,y1:n.y,x2:r.x,y2:r.y,height:r.y-o.y}},e.prototype.framedGraphToViewport=function(t,e){void 0===e&&(e={});var n=!!e.cameraState||!!e.viewportDimensions||!!e.graphDimensions,r=e.matrix?e.matrix:n?(0,m.matrixFromCamera)(e.cameraState||this.camera.getState(),e.viewportDimensions||this.getDimensions(),e.graphDimensions||this.getGraphDimensions(),e.padding||this.getSetting("stagePadding")||0):this.matrix,o=[t.x,t.y,1],c=(0,E.multiplyVec)(r,o);return{x:(1+c[0])*this.width/2,y:(1-c[1])*this.height/2}},e.prototype.viewportToFramedGraph=function(t,e){void 0===e&&(e={});var n=!!e.cameraState||!!e.viewportDimensions||!e.graphDimensions,r=e.matrix?e.matrix:n?(0,m.matrixFromCamera)(e.cameraState||this.camera.getState(),e.viewportDimensions||this.getDimensions(),e.graphDimensions||this.getGraphDimensions(),e.padding||this.getSetting("stagePadding")||0,!0):this.invMatrix,o=[t.x/this.width*2-1,1-t.y/this.height*2,1],c=(0,E.multiplyVec)(r,o);return{x:c[0],y:c[1]}},e.prototype.viewportToGraph=function(t,e){return void 0===e&&(e={}),this.normalizationFunction.inverse(this.viewportToFramedGraph(t,e))},e.prototype.graphToViewport=function(t,e){return void 0===e&&(e={}),this.framedGraphToViewport(this.normalizationFunction(t),e)},e.prototype.getBBox=function(){return(0,m.graphExtent)(this.graph)},e.prototype.getCustomBBox=function(){return this.customBBox},e.prototype.setCustomBBox=function(t){return this.customBBox=t,this._scheduleRefresh(),this},e.prototype.kill=function(){var t=this.graph;this.emit("kill"),this.removeAllListeners(),this.camera.removeListener("updated",this.activeListeners.camera),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),t.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),t.removeListener("nodeDropped",this.activeListeners.graphUpdate),t.removeListener("nodeAttributesUpdated",this.activeListeners.softGraphUpdate),t.removeListener("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),t.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),t.removeListener("edgeDropped",this.activeListeners.graphUpdate),t.removeListener("edgeAttributesUpdated",this.activeListeners.softGraphUpdate),t.removeListener("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),t.removeListener("edgesCleared",this.activeListeners.graphUpdate),t.removeListener("cleared",this.activeListeners.graphUpdate),this.quadtree=new y.default,this.nodeDataCache={},this.edgeDataCache={},this.nodesWithForcedLabels=[],this.edgesWithForcedLabels=[],this.highlightedNodes.clear(),this.renderFrame&&((0,m.cancelFrame)(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&((0,m.cancelFrame)(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var e=this.container;e.firstChild;)e.removeChild(e.firstChild)},e.prototype.scaleSize=function(t){return t/this.cameraSizeRatio},e.prototype.getCanvases=function(){return c({},this.elements)},e}(v.TypedEventEmitter);e.default=S},312:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.animateNodes=e.ANIMATE_DEFAULTS=void 0;var o=n(280),c=r(n(301));e.ANIMATE_DEFAULTS={easing:"quadraticInOut",duration:150},e.animateNodes=function(t,n,r,h){var d=Object.assign({},e.ANIMATE_DEFAULTS,r),l="function"==typeof d.easing?d.easing:c.default[d.easing],f=Date.now(),y={};for(var v in n){var m=n[v];for(var w in y[v]={},m)y[v][w]=t.getNodeAttribute(v,w)}var _=null,x=function(){var p=(Date.now()-f)/d.duration;if(p>=1){for(var e in n){var r=n[e];for(var c in r)t.setNodeAttribute(e,c,r[c])}"function"==typeof h&&h()}else{for(var e in p=l(p),n){r=n[e];var s=y[e];for(var c in r)t.setNodeAttribute(e,c,r[c]*p+s[c]*(1-p))}_=(0,o.requestFrame)(x)}};return x(),function(){_&&(0,o.cancelFrame)(_)}}},315:function(t,e){t.exports=function(t,e){var n=e.length;if(0!==n){var r=t.length;t.length+=n;for(var i=0;i<n;i++)t[r+i]=e[i]}}},316:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.edgeLabelsToDisplayFromNodes=e.LabelGrid=void 0;var r=function(){function t(t,e){this.key=t,this.size=e}return t.compare=function(t,e){return t.size>e.size?-1:t.size<e.size||t.key>e.key?1:-1},t}(),o=function(){function t(){this.width=0,this.height=0,this.cellSize=0,this.columns=0,this.rows=0,this.cells={}}return t.prototype.resizeAndClear=function(t,e){this.width=t.width,this.height=t.height,this.cellSize=e,this.columns=Math.ceil(t.width/e),this.rows=Math.ceil(t.height/e),this.cells={}},t.prototype.getIndex=function(t){var e=Math.floor(t.x/this.cellSize);return Math.floor(t.y/this.cellSize)*this.columns+e},t.prototype.add=function(t,e,n){var o=new r(t,e),c=this.getIndex(n),h=this.cells[c];h||(h=[],this.cells[c]=h),h.push(o)},t.prototype.organize=function(){for(var t in this.cells){this.cells[t].sort(r.compare)}},t.prototype.getLabelsToDisplay=function(t,e){var n=this.cellSize*this.cellSize,r=n/t/t*e/n,o=Math.ceil(r),c=[];for(var h in this.cells)for(var d=this.cells[h],i=0;i<Math.min(o,d.length);i++)c.push(d[i].key);return c},t}();e.LabelGrid=o,e.edgeLabelsToDisplayFromNodes=function(t){var e=t.graph,n=t.hoveredNode,r=t.highlightedNodes,o=t.displayedNodeLabels,c=[];return e.forEachEdge((function(t,e,source,h){(source===n||h===n||r.has(source)||r.has(h)||o.has(source)&&o.has(h))&&c.push(t)})),c}},317:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_SETTINGS=e.validateSettings=void 0;var o=r(n(305)),c=r(n(318)),h=r(n(319)),d=r(n(320)),l=r(n(324)),f=r(n(326));e.validateSettings=function(t){if("number"!=typeof t.labelDensity||t.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var e=t.minCameraRatio,n=t.maxCameraRatio;if("number"==typeof e&&"number"==typeof n&&n<e)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")},e.DEFAULT_SETTINGS={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeClickEvents:!1,enableEdgeWheelEvents:!1,enableEdgeHoverEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,labelRenderer:o.default,hoverRenderer:c.default,edgeLabelRenderer:h.default,nodeProgramClasses:{circle:d.default},edgeProgramClasses:{arrow:f.default,line:l.default}}},318:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(305));e.default=function(t,data,e){var n=e.labelSize,r=e.labelFont,c=e.labelWeight;if(t.font="".concat(c," ").concat(n,"px ").concat(r),t.fillStyle="#FFF",t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=8,t.shadowColor="#000","string"==typeof data.label){var h=t.measureText(data.label).width,d=Math.round(h+5),l=Math.round(n+4),f=Math.max(data.size,n/2)+2,y=Math.asin(l/2/f),v=Math.sqrt(Math.abs(Math.pow(f,2)-Math.pow(l/2,2)));t.beginPath(),t.moveTo(data.x+v,data.y+l/2),t.lineTo(data.x+f+d,data.y+l/2),t.lineTo(data.x+f+d,data.y-l/2),t.lineTo(data.x+v,data.y-l/2),t.arc(data.x,data.y,f,y,-y),t.closePath(),t.fill()}else t.beginPath(),t.arc(data.x,data.y,data.size+2,0,2*Math.PI),t.closePath(),t.fill();t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,(0,o.default)(t,data,e)}},319:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,r,o){var c=o.edgeLabelSize,h=o.edgeLabelFont,d=o.edgeLabelWeight,l=o.edgeLabelColor.attribute?e[o.edgeLabelColor.attribute]||o.edgeLabelColor.color||"#000":o.edgeLabelColor.color,label=e.label;if(label){t.fillStyle=l,t.font="".concat(d," ").concat(c,"px ").concat(h);var f,y,v=n.size,m=r.size,w=n.x,_=n.y,x=r.x,E=r.y,L=x-w,A=E-_,k=Math.sqrt(L*L+A*A);if(!(k<v+m)){f=((w+=L*v/k)+(x-=L*m/k))/2,y=((_+=A*v/k)+(E-=A*m/k))/2,L=x-w,A=E-_,k=Math.sqrt(L*L+A*A);var G,S=t.measureText(label).width;if(S>k){for(label+="",S=t.measureText(label).width;S>k&&label.length>1;)label=label.slice(0,-2)+"",S=t.measureText(label).width;if(label.length<4)return}G=L>0?A>0?Math.acos(L/k):Math.asin(A/k):A>0?Math.acos(L/k)+Math.PI:Math.asin(L/k)+Math.PI/2,t.save(),t.translate(f,y),t.rotate(G),t.fillText(label,-S/2,e.size/2+c),t.restore()}}}},320:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,b){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(t[p]=b[p])},r(t,b)},function(t,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}),c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var h=n(280),d=c(n(321)),l=c(n(322)),f=n(284),y=function(t){function e(e){var n=t.call(this,e,d.default,l.default,1,4)||this;return n.bind(),n}return o(e,t),e.prototype.process=function(data,t,e){var n=this.array,i=1*e*4;if(t)return n[i++]=0,n[i++]=0,n[i++]=0,void(n[i++]=0);var r=(0,h.floatColor)(data.color);n[i++]=data.x,n[i++]=data.y,n[i++]=data.size,n[i]=r},e.prototype.render=function(t){if(!this.hasNothingToRender()){var e=this.gl,n=this.program;e.useProgram(n),e.uniform1f(this.ratioLocation,1/Math.sqrt(t.ratio)),e.uniform1f(this.scaleLocation,t.scalingRatio),e.uniformMatrix3fv(this.matrixLocation,!1,t.matrix),e.drawArrays(e.POINTS,0,this.array.length/4)}},e}(f.AbstractNodeProgram);e.default=y},321:function(t,e){(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};e.r(n),e.d(n,{default:()=>r});const r="attribute vec2 a_position;\nattribute float a_size;\nattribute vec4 a_color;\n\nuniform float u_ratio;\nuniform float u_scale;\nuniform mat3 u_matrix;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  gl_Position = vec4(\n    (u_matrix * vec3(a_position, 1)).xy,\n    0,\n    1\n  );\n\n  // Multiply the point size twice:\n  //  - x SCALING_RATIO to correct the canvas scaling\n  //  - x 2 to correct the formulae\n  gl_PointSize = a_size * u_ratio * u_scale * 2.0;\n\n  v_border = (1.0 / u_ratio) * (0.5 / a_size);\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";t.exports=n})()},322:function(t,e){(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};e.r(n),e.d(n,{default:()=>r});const r="precision mediump float;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float radius = 0.5;\n\nvoid main(void) {\n  vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec2 m = gl_PointCoord - vec2(0.5, 0.5);\n  float dist = radius - length(m);\n\n  float t = 0.0;\n  if (dist > v_border)\n    t = 1.0;\n  else if (dist > 0.0)\n    t = dist / v_border;\n\n  gl_FragColor = mix(color0, v_color, t);\n}\n";t.exports=n})()},324:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,b){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(t[p]=b[p])},r(t,b)},function(t,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}),c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var h=n(280),d=c(n(325)),l=c(n(306)),f=n(287),y=function(t){function e(e){var n=t.call(this,e,d.default,l.default,4,5)||this,r=e.createBuffer();if(null===r)throw new Error("EdgeProgram: error while creating indicesBuffer");n.indicesBuffer=r,n.positionLocation=e.getAttribLocation(n.program,"a_position"),n.colorLocation=e.getAttribLocation(n.program,"a_color"),n.normalLocation=e.getAttribLocation(n.program,"a_normal");var o=e.getUniformLocation(n.program,"u_matrix");if(null===o)throw new Error("EdgeProgram: error while getting matrixLocation");n.matrixLocation=o;var c=e.getUniformLocation(n.program,"u_correctionRatio");if(null===c)throw new Error("EdgeProgram: error while getting correctionRatioLocation");n.correctionRatioLocation=c;var f=e.getUniformLocation(n.program,"u_sqrtZoomRatio");if(null===f)throw new Error("EdgeProgram: error while getting sqrtZoomRatioLocation");return n.sqrtZoomRatioLocation=f,n.canUse32BitsIndices=(0,h.canUse32BitsIndices)(e),n.IndicesArray=n.canUse32BitsIndices?Uint32Array:Uint16Array,n.indicesArray=new n.IndicesArray,n.indicesType=n.canUse32BitsIndices?e.UNSIGNED_INT:e.UNSIGNED_SHORT,n.bind(),n}return o(e,t),e.prototype.bind=function(){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.enableVertexAttribArray(this.positionLocation),t.enableVertexAttribArray(this.normalLocation),t.enableVertexAttribArray(this.colorLocation),t.vertexAttribPointer(this.positionLocation,2,t.FLOAT,!1,5*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(this.normalLocation,2,t.FLOAT,!1,5*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(this.colorLocation,4,t.UNSIGNED_BYTE,!0,5*Float32Array.BYTES_PER_ELEMENT,16)},e.prototype.computeIndices=function(){for(var t=this.array.length/5,e=t+t/2,n=new this.IndicesArray(e),i=0,r=0;i<t;i+=4)n[r++]=i,n[r++]=i+1,n[r++]=i+2,n[r++]=i+2,n[r++]=i+1,n[r++]=i+3;this.indicesArray=n},e.prototype.bufferData=function(){t.prototype.bufferData.call(this);var e=this.gl;e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indicesArray,e.STATIC_DRAW)},e.prototype.process=function(t,e,data,n,r){if(n)for(var o=20*r,c=o+20;o<c;o++)this.array[o]=0;else{var d=data.size||1,l=t.x,f=t.y,y=e.x,v=e.y,m=(0,h.floatColor)(data.color),w=y-l,_=v-f,x=w*w+_*_,E=0,L=0;x&&(E=-_*(x=1/Math.sqrt(x))*d,L=w*x*d);var i=20*r,A=this.array;A[i++]=l,A[i++]=f,A[i++]=E,A[i++]=L,A[i++]=m,A[i++]=l,A[i++]=f,A[i++]=-E,A[i++]=-L,A[i++]=m,A[i++]=y,A[i++]=v,A[i++]=E,A[i++]=L,A[i++]=m,A[i++]=y,A[i++]=v,A[i++]=-E,A[i++]=-L,A[i]=m}},e.prototype.render=function(t){if(!this.hasNothingToRender()){var e=this.gl,n=this.program;e.useProgram(n),e.uniformMatrix3fv(this.matrixLocation,!1,t.matrix),e.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(t.ratio)),e.uniform1f(this.correctionRatioLocation,t.correctionRatio),e.drawElements(e.TRIANGLES,this.indicesArray.length,this.indicesType,0)}},e}(f.AbstractEdgeProgram);e.default=y},325:function(t,e){(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};e.r(n),e.d(n,{default:()=>r});const r='attribute vec4 a_color;\nattribute vec2 a_normal;\nattribute vec2 a_position;\n\nuniform mat3 u_matrix;\nuniform float u_sqrtZoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // We require edges to be at least `minThickness` pixels thick *on screen*\n  // (so we need to compensate the SQRT zoom ratio):\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\n\n  // Then, we need to retrieve the normalized thickness of the edge in the WebGL\n  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction\n  // ratio:\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n\n  // Finally, we adapt the edge thickness to the "SQRT rule" in sigma (so that\n  // items are not too big when zoomed in, and not too small when zoomed out).\n  // The exact computation should be `adapted = value * zoom / sqrt(zoom)`, but\n  // it\'s simpler like this:\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness, 1)).xy, 0, 1);\n\n  // For the fragment shader though, we need a thickness that takes the "magic"\n  // correction ratio into account (as in webGLThickness), but so that the\n  // antialiasint effect does not depend on the zoom level. So here\'s yet\n  // another thickness version:\n  v_thickness = webGLThickness / u_sqrtZoomRatio;\n\n  v_normal = unitNormal;\n  v_color = a_color;\n  v_color.a *= bias;\n}\n';t.exports=n})()},326:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(287),c=r(n(327)),h=r(n(330)),d=(0,o.createEdgeCompoundProgram)([h.default,c.default]);e.default=d},327:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,b){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(t[p]=b[p])},r(t,b)},function(t,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}),c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var h=n(280),d=c(n(328)),l=c(n(329)),f=n(287),y=function(t){function e(e){var n=t.call(this,e,d.default,l.default,3,9)||this;n.positionLocation=e.getAttribLocation(n.program,"a_position"),n.colorLocation=e.getAttribLocation(n.program,"a_color"),n.normalLocation=e.getAttribLocation(n.program,"a_normal"),n.radiusLocation=e.getAttribLocation(n.program,"a_radius"),n.barycentricLocation=e.getAttribLocation(n.program,"a_barycentric");var r=e.getUniformLocation(n.program,"u_matrix");if(null===r)throw new Error("EdgeArrowHeadProgram: error while getting matrixLocation");n.matrixLocation=r;var o=e.getUniformLocation(n.program,"u_sqrtZoomRatio");if(null===o)throw new Error("EdgeArrowHeadProgram: error while getting sqrtZoomRatioLocation");n.sqrtZoomRatioLocation=o;var c=e.getUniformLocation(n.program,"u_correctionRatio");if(null===c)throw new Error("EdgeArrowHeadProgram: error while getting correctionRatioLocation");return n.correctionRatioLocation=c,n.bind(),n}return o(e,t),e.prototype.bind=function(){var t=this.gl;t.enableVertexAttribArray(this.positionLocation),t.enableVertexAttribArray(this.normalLocation),t.enableVertexAttribArray(this.radiusLocation),t.enableVertexAttribArray(this.colorLocation),t.enableVertexAttribArray(this.barycentricLocation),t.vertexAttribPointer(this.positionLocation,2,t.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(this.normalLocation,2,t.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(this.radiusLocation,1,t.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,16),t.vertexAttribPointer(this.colorLocation,4,t.UNSIGNED_BYTE,!0,9*Float32Array.BYTES_PER_ELEMENT,20),t.vertexAttribPointer(this.barycentricLocation,3,t.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,24)},e.prototype.computeIndices=function(){},e.prototype.process=function(t,e,data,n,r){if(n)for(var o=27*r,c=o+27;o<c;o++)this.array[o]=0;else{var d=data.size||1,l=e.size||1,f=t.x,y=t.y,v=e.x,m=e.y,w=(0,h.floatColor)(data.color),_=v-f,x=m-y,E=_*_+x*x,L=0,A=0;E&&(L=-x*(E=1/Math.sqrt(E))*d,A=_*E*d);var i=27*r,k=this.array;k[i++]=v,k[i++]=m,k[i++]=-L,k[i++]=-A,k[i++]=l,k[i++]=w,k[i++]=1,k[i++]=0,k[i++]=0,k[i++]=v,k[i++]=m,k[i++]=-L,k[i++]=-A,k[i++]=l,k[i++]=w,k[i++]=0,k[i++]=1,k[i++]=0,k[i++]=v,k[i++]=m,k[i++]=-L,k[i++]=-A,k[i++]=l,k[i++]=w,k[i++]=0,k[i++]=0,k[i]=1}},e.prototype.render=function(t){if(!this.hasNothingToRender()){var e=this.gl,n=this.program;e.useProgram(n),e.uniformMatrix3fv(this.matrixLocation,!1,t.matrix),e.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(t.ratio)),e.uniform1f(this.correctionRatioLocation,t.correctionRatio),e.drawArrays(e.TRIANGLES,0,this.array.length/9)}},e}(f.AbstractEdgeProgram);e.default=y},328:function(t,e){(()=>{"use strict";var a={d:(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o:(a,t)=>Object.prototype.hasOwnProperty.call(a,t),r:a=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})}},e={};a.r(e),a.d(e,{default:()=>n});const n="attribute vec2 a_position;\nattribute vec2 a_normal;\nattribute float a_radius;\nattribute vec4 a_color;\nattribute vec3 a_barycentric;\n\nuniform mat3 u_matrix;\nuniform float u_sqrtZoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\nconst float arrowHeadWidthLengthRatio = 0.66;\nconst float arrowHeadLengthThicknessRatio = 2.5;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl and\n  // edge.clamped.vert.glsl. Please read it to get better comments on what's\n  // happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\n  float adaptedWebGLNodeRadius = a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;\n  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\n  float adaptedWebGLArrowHeadHalfWidth = adaptedWebGLArrowHeadLength * arrowHeadWidthLengthRatio / 2.0;\n\n  float da = a_barycentric.x;\n  float db = a_barycentric.y;\n  float dc = a_barycentric.z;\n\n  vec2 delta = vec2(\n      da * (adaptedWebGLNodeRadius * unitNormal.y)\n    + db * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y + adaptedWebGLArrowHeadHalfWidth * unitNormal.x)\n    + dc * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y - adaptedWebGLArrowHeadHalfWidth * unitNormal.x),\n\n      da * (-adaptedWebGLNodeRadius * unitNormal.x)\n    + db * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x + adaptedWebGLArrowHeadHalfWidth * unitNormal.y)\n    + dc * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x - adaptedWebGLArrowHeadHalfWidth * unitNormal.y)\n  );\n\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\n\n  gl_Position = vec4(position, 0, 1);\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";t.exports=e})()},329:function(t,e){(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};e.r(n),e.d(n,{default:()=>r});const r="precision mediump float;\n\nvarying vec4 v_color;\n\nvoid main(void) {\n  gl_FragColor = v_color;\n}\n";t.exports=n})()},330:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,b){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(t[p]=b[p])},r(t,b)},function(t,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}),c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var h=n(287),d=n(280),l=c(n(331)),f=c(n(306)),y=function(t){function e(e){var n=t.call(this,e,l.default,f.default,4,6)||this,r=e.createBuffer();if(null===r)throw new Error("EdgeClampedProgram: error while getting resolutionLocation");n.indicesBuffer=r,n.positionLocation=e.getAttribLocation(n.program,"a_position"),n.colorLocation=e.getAttribLocation(n.program,"a_color"),n.normalLocation=e.getAttribLocation(n.program,"a_normal"),n.radiusLocation=e.getAttribLocation(n.program,"a_radius");var o=e.getUniformLocation(n.program,"u_matrix");if(null===o)throw new Error("EdgeClampedProgram: error while getting matrixLocation");n.matrixLocation=o;var c=e.getUniformLocation(n.program,"u_sqrtZoomRatio");if(null===c)throw new Error("EdgeClampedProgram: error while getting cameraRatioLocation");n.sqrtZoomRatioLocation=c;var h=e.getUniformLocation(n.program,"u_correctionRatio");if(null===h)throw new Error("EdgeClampedProgram: error while getting viewportRatioLocation");return n.correctionRatioLocation=h,n.canUse32BitsIndices=(0,d.canUse32BitsIndices)(e),n.IndicesArray=n.canUse32BitsIndices?Uint32Array:Uint16Array,n.indicesArray=new n.IndicesArray,n.indicesType=n.canUse32BitsIndices?e.UNSIGNED_INT:e.UNSIGNED_SHORT,n.bind(),n}return o(e,t),e.prototype.bind=function(){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.enableVertexAttribArray(this.positionLocation),t.enableVertexAttribArray(this.normalLocation),t.enableVertexAttribArray(this.colorLocation),t.enableVertexAttribArray(this.radiusLocation),t.vertexAttribPointer(this.positionLocation,2,t.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(this.normalLocation,2,t.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(this.colorLocation,4,t.UNSIGNED_BYTE,!0,6*Float32Array.BYTES_PER_ELEMENT,16),t.vertexAttribPointer(this.radiusLocation,1,t.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,20)},e.prototype.process=function(t,e,data,n,r){if(n)for(var o=24*r,c=o+24;o<c;o++)this.array[o]=0;else{var h=data.size||1,l=t.x,f=t.y,y=e.x,v=e.y,m=e.size||1,w=(0,d.floatColor)(data.color),_=y-l,x=v-f,E=_*_+x*x,L=0,A=0;E&&(L=-x*(E=1/Math.sqrt(E))*h,A=_*E*h);var i=24*r,k=this.array;k[i++]=l,k[i++]=f,k[i++]=L,k[i++]=A,k[i++]=w,k[i++]=0,k[i++]=l,k[i++]=f,k[i++]=-L,k[i++]=-A,k[i++]=w,k[i++]=0,k[i++]=y,k[i++]=v,k[i++]=L,k[i++]=A,k[i++]=w,k[i++]=m,k[i++]=y,k[i++]=v,k[i++]=-L,k[i++]=-A,k[i++]=w,k[i]=-m}},e.prototype.computeIndices=function(){for(var t=this.array.length/6,e=t+t/2,n=new this.IndicesArray(e),i=0,r=0;i<t;i+=4)n[r++]=i,n[r++]=i+1,n[r++]=i+2,n[r++]=i+2,n[r++]=i+1,n[r++]=i+3;this.indicesArray=n},e.prototype.bufferData=function(){t.prototype.bufferData.call(this);var e=this.gl;e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indicesArray,e.STATIC_DRAW)},e.prototype.render=function(t){if(!this.hasNothingToRender()){var e=this.gl,n=this.program;e.useProgram(n),e.uniformMatrix3fv(this.matrixLocation,!1,t.matrix),e.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(t.ratio)),e.uniform1f(this.correctionRatioLocation,t.correctionRatio),e.drawElements(e.TRIANGLES,this.indicesArray.length,this.indicesType,0)}},e}(h.AbstractEdgeProgram);e.default=y},331:function(t,e){(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};e.r(n),e.d(n,{default:()=>r});const r="attribute vec4 a_color;\nattribute vec2 a_normal;\nattribute vec2 a_position;\nattribute float a_radius;\n\nuniform mat3 u_matrix;\nuniform float u_sqrtZoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\nconst float arrowHeadLengthThicknessRatio = 2.5;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl. Please read it to\n  // get better comments on what's happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\n\n  // Here, we move the point to leave space for the arrow head:\n  float direction = sign(a_radius);\n  float adaptedWebGLNodeRadius = direction * a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;\n  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\n\n  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength);\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness + compensationVector, 1)).xy, 0, 1);\n\n  v_thickness = webGLThickness / u_sqrtZoomRatio;\n\n  v_normal = unitNormal;\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";t.exports=n})()},332:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,b){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(t[p]=b[p])},r(t,b)},function(t,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}),c=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),h=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),d=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&c(e,t,n);return h(e,t),e},l=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)c.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c};Object.defineProperty(e,"__esModule",{value:!0});var f=d(n(303)),y=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.enabled=!0,r.isMoving=!1,r.touchMode=0,r.handleStart=r.handleStart.bind(r),r.handleLeave=r.handleLeave.bind(r),r.handleMove=r.handleMove.bind(r),e.addEventListener("touchstart",r.handleStart,!1),e.addEventListener("touchend",r.handleLeave,!1),e.addEventListener("touchcancel",r.handleLeave,!1),e.addEventListener("touchmove",r.handleMove,!1),r}return o(e,t),e.prototype.kill=function(){var t=this.container;t.removeEventListener("touchstart",this.handleStart),t.removeEventListener("touchend",this.handleLeave),t.removeEventListener("touchcancel",this.handleLeave),t.removeEventListener("touchmove",this.handleMove)},e.prototype.getDimensions=function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}},e.prototype.dispatchRelatedMouseEvent=function(t,e,n,r){var o=n||(0,f.getPosition)(e.touches[0],this.container),c=new MouseEvent(t,{clientX:o.x,clientY:o.y,altKey:e.altKey,ctrlKey:e.ctrlKey});(r||this.container).dispatchEvent(c)},e.prototype.handleStart=function(t){var e=this;if(this.enabled){t.preventDefault(),1===t.touches.length&&this.dispatchRelatedMouseEvent("mousedown",t);var n=(0,f.getTouchesArray)(t.touches);if(this.isMoving=!0,this.touchMode=n.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=n.map((function(t){return(0,f.getPosition)(t,e.container)})),this.lastTouchesPositions=this.startTouchesPositions,2===this.touchMode){var r=l(this.startTouchesPositions,2),o=r[0],c=o.x,h=o.y,d=r[1],y=d.x,v=d.y;this.startTouchesAngle=Math.atan2(v-h,y-c),this.startTouchesDistance=Math.sqrt(Math.pow(y-c,2)+Math.pow(v-h,2))}this.emit("touchdown",(0,f.getTouchCoords)(t,this.container))}},e.prototype.handleLeave=function(t){if(this.enabled){switch(t.preventDefault(),0===t.touches.length&&this.lastTouchesPositions&&this.lastTouchesPositions.length&&(this.dispatchRelatedMouseEvent("mouseup",t,this.lastTouchesPositions[0],document),this.dispatchRelatedMouseEvent("click",t,this.lastTouchesPositions[0])),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(1===t.touches.length){this.handleStart(t),t.preventDefault();break}case 1:if(this.isMoving){var e=this.renderer.getCamera(),n=e.getState(),r=e.getPreviousState()||{x:0,y:0};e.animate({x:n.x+3*(n.x-r.x),y:n.y+3*(n.y-r.y)},{duration:200,easing:"quadraticOut"})}this.isMoving=!1,this.touchMode=0}this.emit("touchup",(0,f.getTouchCoords)(t,this.container))}},e.prototype.handleMove=function(t){var e,n=this;if(this.enabled){t.preventDefault(),1===t.touches.length&&this.dispatchRelatedMouseEvent("mousemove",t);var r=this.renderer.getCamera(),o=this.startCameraState,c=(0,f.getTouchesArray)(t.touches).map((function(t){return(0,f.getPosition)(t,n.container)}));switch(this.lastTouchesPositions=c,this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout((function(){n.isMoving=!1}),200),this.touchMode){case 1:var h=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),d=h.x,y=h.y,v=this.renderer.viewportToFramedGraph(c[0]),m=v.x,w=v.y;r.setState({x:o.x+d-m,y:o.y+y-w});break;case 2:var _={},x=c[0],E=x.x,L=x.y,A=c[1],k=A.x,G=A.y,S=Math.atan2(G-L,k-E)-this.startTouchesAngle,C=Math.hypot(G-L,k-E)/this.startTouchesDistance,T=r.getBoundedRatio(o.ratio/C);_.ratio=T,_.angle=o.angle+S;var P=this.getDimensions(),D=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:o}),M=Math.min(P.width,P.height),O=M/P.width,N=T/M;w=L-M/2/(M/P.height);m=(e=l([(m=E-M/2/O)*Math.cos(-_.angle)-w*Math.sin(-_.angle),w*Math.cos(-_.angle)+m*Math.sin(-_.angle)],2))[0],w=e[1],_.x=D.x-m*N,_.y=D.y+w*N,r.setState(_)}this.emit("touchmove",(0,f.getTouchCoords)(t,this.container))}},e}(f.default);e.default=y},333:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.doEdgeCollideWithPoint=e.isPixelColored=void 0,e.isPixelColored=function(t,e,n){var r=new Uint8Array(4);return t.readPixels(e,t.drawingBufferHeight-n,1,1,t.RGBA,t.UNSIGNED_BYTE,r),r[3]>0},e.doEdgeCollideWithPoint=function(t,e,n,r,o,c,h){return!(t<n-h&&t<o-h)&&(!(e<r-h&&e<c-h)&&(!(t>n+h&&t>o+h)&&(!(e>r+h&&e>c+h)&&Math.abs((o-n)*(r-e)-(n-t)*(c-r))/Math.sqrt(Math.pow(o-n,2)+Math.pow(c-r,2))<h/2)))}},334:function(t,e){(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};e.r(n),e.d(n,{default:()=>r});const r="attribute vec2 a_position;\nattribute float a_size;\nattribute vec4 a_color;\nattribute vec4 a_texture;\n\nuniform float u_ratio;\nuniform float u_scale;\nuniform mat3 u_matrix;\n\nvarying vec4 v_color;\nvarying float v_border;\nvarying vec4 v_texture;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  gl_Position = vec4(\n    (u_matrix * vec3(a_position, 1)).xy,\n    0,\n    1\n  );\n\n  // Multiply the point size twice:\n  //  - x SCALING_RATIO to correct the canvas scaling\n  //  - x 2 to correct the formulae\n  gl_PointSize = a_size * u_ratio * u_scale * 2.0;\n\n  v_border = (1.0 / u_ratio) * (0.5 / a_size);\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n\n  // Pass the texture coordinates:\n  v_texture = a_texture;\n}\n";t.exports=n})()},335:function(t,e){(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};e.r(n),e.d(n,{default:()=>r});const r="precision mediump float;\n\nvarying vec4 v_color;\nvarying float v_border;\nvarying vec4 v_texture;\n\nuniform sampler2D u_atlas;\n\nconst float radius = 0.5;\n\nvoid main(void) {\n  vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n  vec4 color;\n\n  if (v_texture.w > 0.0) {\n    vec4 texel = texture2D(u_atlas, v_texture.xy + gl_PointCoord * v_texture.zw, -1.0);\n    color = vec4(mix(v_color, texel, texel.a).rgb, max(texel.a, v_color.a));\n  } else {\n    color = v_color;\n  }\n\n  vec2 m = gl_PointCoord - vec2(0.5, 0.5);\n  float dist = length(m);\n\n  if (dist < radius - v_border) {\n    gl_FragColor = color;\n  } else if (dist < radius) {\n    gl_FragColor = mix(transparent, color, (radius - dist) / v_border);\n  } else {\n    gl_FragColor = transparent;\n  }\n}\n";t.exports=n})()},337:function(t,e){t.exports=function t(e,n){e=e||{};var r,output={};for(var o in n){var c=e[o],h=n[o];!(r=h)||"object"!=typeof r||"function"==typeof r||Array.isArray(r)||r instanceof Set||r instanceof Map||r instanceof RegExp||r instanceof Date?output[o]=void 0===c?h:c:output[o]=t(c,h)}return output}},338:function(t,e,n){const{createNodeValueGetter:r,createEdgeValueGetter:o}=n(339);t.exports=function(t,e,n){const{nodeXAttribute:c,nodeYAttribute:h}=n,{attraction:d,repulsion:l,gravity:f,inertia:y,maxMove:v}=n.settings;let{shouldSkipNode:m,shouldSkipEdge:w,isNodeFixed:_}=n;_=r(_),m=r(m,!1),w=o(w,!1);const x=t.filterNodes(((t,e)=>!m.fromEntry(t,e))),E=x.length;for(let i=0;i<E;i++){const n=x[i],r=t.getNodeAttributes(n),o=e[n];e[n]=o?{dx:o.dx*y,dy:o.dy*y,x:r[c]||0,y:r[h]||0}:{dx:0,dy:0,x:r[c]||0,y:r[h]||0}}if(l)for(let i=0;i<E;i++){const t=x[i],n=e[t];for(let t=i+1;t<E;t++){const r=x[t],o=e[r],c=o.x-n.x,h=o.y-n.y,d=Math.sqrt(c*c+h*h)||1,f=l/d*c,y=l/d*h;n.dx-=f,n.dy-=y,o.dx+=f,o.dy+=y}}if(d&&t.forEachEdge(((t,n,source,r,o,c,h)=>{if(source===r)return;if(m.fromEntry(source,o)||m.fromEntry(r,c))return;if(w.fromEntry(t,n,source,r,o,c,h))return;const l=e[source],f=e[r],y=f.x-l.x,v=f.y-l.y,_=Math.sqrt(y*y+v*v)||1,x=d*_*y,E=d*_*v;l.dx+=x,l.dy+=E,f.dx-=x,f.dy-=E})),f)for(let i=0;i<E;i++){const t=x[i],n=e[t],{x:r,y:o}=n,c=Math.sqrt(r*r+o*o)||1;e[t].dx-=r*f*c,e[t].dy-=o*f*c}for(let i=0;i<E;i++){const n=x[i],r=e[n],o=Math.sqrt(r.dx*r.dx+r.dy*r.dy);o>v&&(r.dx*=v/o,r.dy*=v/o),_.fromGraph(t,n)?r.fixed=!0:(r.x+=r.dx,r.y+=r.dy,r.fixed=!1)}return{converged:!1}}},339:function(t,e){function n(t){return"number"!=typeof t||isNaN(t)?1:t}function r(t,e){var n={},r=function(t){return void 0===t?e:t};"function"==typeof e&&(r=e);var o=function(e){return r(e[t])},c=function(){return r(void 0)};return"string"==typeof t?(n.fromAttributes=o,n.fromGraph=function(t,e){return o(t.getEdgeAttributes(e))},n.fromEntry=function(t,e){return o(e)},n.fromPartialEntry=n.fromEntry,n.fromMinimalEntry=n.fromEntry):"function"==typeof t?(n.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},n.fromGraph=function(e,n){var o=e.extremities(n);return r(t(n,e.getEdgeAttributes(n),o[0],o[1],e.getNodeAttributes(o[0]),e.getNodeAttributes(o[1]),e.isUndirected(n)))},n.fromEntry=function(e,a,s,n,o,c,u){return r(t(e,a,s,n,o,c,u))},n.fromPartialEntry=function(e,a,s,n){return r(t(e,a,s,n))},n.fromMinimalEntry=function(e,a){return r(t(e,a))}):(n.fromAttributes=c,n.fromGraph=c,n.fromEntry=c,n.fromMinimalEntry=c),n}e.createNodeValueGetter=function(t,e){var n={},r=function(t){return void 0===t?e:t};"function"==typeof e&&(r=e);var o=function(e){return r(e[t])},c=function(){return r(void 0)};return"string"==typeof t?(n.fromAttributes=o,n.fromGraph=function(t,e){return o(t.getNodeAttributes(e))},n.fromEntry=function(t,e){return o(e)}):"function"==typeof t?(n.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},n.fromGraph=function(e,n){return r(t(n,e.getNodeAttributes(n)))},n.fromEntry=function(e,n){return r(t(e,n))}):(n.fromAttributes=c,n.fromGraph=c,n.fromEntry=c),n},e.createEdgeValueGetter=r,e.createEdgeWeightGetter=function(t){return r(t,n)}},340:function(t,e){e.assignLayoutChanges=function(t,e,n){const{nodeXAttribute:r,nodeYAttribute:o}=n;t.updateEachNodeAttributes(((t,n)=>{const c=e[t];return!c||c.fixed||(n[r]=c.x,n[o]=c.y),n}),{attributes:["x","y"]})},e.collectLayoutChanges=function(t){const e={};for(const n in t){const r=t[n];e[n]={x:r.x,y:r.y}}return e}},341:function(t,e){t.exports={nodeXAttribute:"x",nodeYAttribute:"y",isNodeFixed:"fixed",shouldSkipNode:null,shouldSkipEdge:null,settings:{attraction:5e-4,repulsion:.1,gravity:1e-4,inertia:.6,maxMove:200}}}}]);