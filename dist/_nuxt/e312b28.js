(window.webpackJsonp=window.webpackJsonp||[]).push([[5,6,7,8],{282:function(t,e,n){"use strict";n.r(e);e.default="\nattribute vec2 a_position;\nattribute float a_size;\nattribute vec4 a_color;\n\nuniform float u_ratio;\nuniform float u_scale;\nuniform mat3 u_matrix;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  gl_Position = vec4(\n    (u_matrix * vec3(a_position, 1)).xy,\n    0,\n    1\n  );\n\n  // Multiply the point size twice:\n  //  - x SCALING_RATIO to correct the canvas scaling\n  //  - x 2 to correct the formulae\n  gl_PointSize = a_size * u_ratio * u_scale * 2.0;\n\n  v_border = (1.0 / u_ratio) * (0.5 / a_size);\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n"},283:function(t,e,n){"use strict";n.r(e);e.default="\nprecision mediump float;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float radius = 0.5;\nconst float halfRadius = 0.35;\n\nvoid main(void) {\n  vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n  vec4 white = vec4(1.0, 1.0, 1.0, 1.0);\n  vec4 blue = vec4(0.125,0.506,0.886, 1.0);\n  float distToCenter = length(gl_PointCoord - vec2(0.5, 0.5));\n\n  float t = 0.0;\n  if (distToCenter < halfRadius - v_border)\n    gl_FragColor = white;\n  else if (distToCenter < halfRadius)\n    gl_FragColor = mix(v_color, blue, (halfRadius - distToCenter) / v_border);\n  else if (distToCenter < radius - v_border)\n    gl_FragColor = v_color;\n  else if (distToCenter < radius)\n    gl_FragColor = mix(transparent, v_color, (radius - distToCenter) / v_border);\n  else\n    gl_FragColor = transparent;\n}\n"},286:function(t,e,n){var content=n(292);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(50).default)("e50169e0",content,!0,{sourceMap:!1})},288:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return x}));n(11),n(289);var r=n(132),o=n(133),c=n(293),l=n(294),d=n(290),f=n(280),h=(n(281),n(284)),m=(n(285),n(282)),v=n(283);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var x=function(t){Object(c.a)(n,t);var e=y(n);function n(t){var o;return Object(r.a)(this,n),(o=e.call(this,t,m.default,v.default,1,4)).bind(),o}return Object(o.a)(n,[{key:"process",value:function(data,t,e){var n=this.array,i=1*e*4;if(t)return n[i++]=0,n[i++]=0,n[i++]=0,void(n[i++]=0);var r=Object(f.floatColor)(data.color);n[i++]=data.x,n[i++]=data.y,n[i++]=data.size,n[i]=r}},{key:"render",value:function(t){var e=this.gl,n=this.program;e.useProgram(n),e.uniform1f(this.ratioLocation,1/Math.sqrt(t.ratio)),e.uniform1f(this.scaleLocation,t.scalingRatio),e.uniformMatrix3fv(this.matrixLocation,!1,t.matrix),e.drawArrays(e.POINTS,0,this.array.length/4)}}]),n}(h.AbstractNodeProgram)},291:function(t,e,n){"use strict";n(286)},292:function(t,e,n){var r=n(49)(!1);r.push([t.i,'.close-panel{display:block;position:absolute;top:10px;right:10px;cursor:pointer;width:20px}@font-face{font-family:newLine;src:url(/fonts/Newline-TextBlack);font-weight:700}.cta-btn{margin-top:15px;background-color:#ff2d55;border:none;color:#fff;padding:15px 32px;text-align:center;text-decoration:none;display:inline-block;font-size:16px;border-radius:5px}#__layout,#__nuxt,body,html{height:100%;padding:0;margin:0}.info-panel{font-family:"newLine",Fallback,sans-serif;box-shadow:0 0 4px 0 #000;background-color:hsla(0,0%,100%,.9);z-index:1;width:35%;height:100%;position:absolute}.info-panel .header{padding:30px;min-height:300px;background-size:cover;background-position:50%;background-repeat:no-repeat}.info-panel .header h1,.info-panel .header h2{display:inline-block;background-color:hsla(0,0%,100%,.5);padding:20px;margin-bottom:15px;margin-top:0}.info-panel .content-body{position:relative;padding-left:30px;padding-right:35px;padding-top:20px}.info-panel .content-body h1{margin-bottom:5px;margin-top:0}.info-panel .content-body h2{margin-top:10px}.info-panel .content-body .token-gated svg{width:30px}.info-panel .pill{background-color:#f1f1f1;padding:10px;margin-right:10px;display:inline-block;border-radius:20px}#sigma-container,.network-graph-wrap{width:100%;height:100%}',""]),t.exports=r},310:function(t,e,n){"use strict";n.r(e);n(22),n(52),n(53);var r=n(29),o=n(10),c=(n(63),n(51),n(295),n(11),n(31),n(75),n(76),n(32),n(77),n(36),n(78),n(296)),l=n.n(c),d=n(297),f=n.n(d),h=n(307),m=n.n(h),v=n(288),y=n(308),x=n.n(y),_=n(74),w=n.n(_);function C(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function k(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var O={props:["initialSpaceId"],data:function(){return{settings:{initialSpaceQueryLimit:20,newNodeQueriesLimit:20,focusZoom:.4,nodeColor:"#2081E2",minZoom:.1,maxZoom:1.5,selectSpaceOnLoad:!0},authToken:null,map:{},graph:new l.a,renderer:null,drag:!1,infoPanel:null,nodesAlreadyQueried:[],graphInitialized:!1}},computed:{nodeList:function(){return this.map?Object.values(this.map):{}},edgeList:function(){var t=this,e=[];return this.nodeList.forEach((function(n,r){var o=n.id;n.portals.length&&n.portals.forEach((function(n,r){var c={from:o,to:n};Object.keys(t.map).includes(n)&&e.push(c)}))})),e}},watch:{nodeList:function(t,e){this.graphInitialized&&this.updateGraph(t,e)},edgeList:function(){this.graphInitialized||(this.initializeGraph(),this.graphInitialized=!0)},infoPanel:function(data){var t=this;data?this.graph.nodes().forEach((function(e){e===data.id?t.graph._nodes.get(data.id).attributes.size=50:t.graph._nodes.get(e).attributes.size=15})):this.graph.nodes().forEach((function(e){t.graph._nodes.get(e).attributes.size=15}))}},methods:{focusNode:function(t,e,n){var r=t.getCamera().getBoundedRatio(this.settings.focusZoom),o=t.getNodeDisplayData(this.infoPanel.id);t.getCamera().animate({x:o.x-.1,y:o.y,ratio:r},{duration:500})},setInfoPanel:function(t){this.infoPanel=null,this.infoPanel=this.map[t]},clearInfoPanel:function(){this.infoPanel=null},queryQuadTreeList:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.forEach(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMapBySpaceId(n,e.settings.newNodeQueriesLimit);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return n.stop()}}),n)})))()},getMapBySpaceId:function(t,e){var n=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var o,c,l,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n.getAuthToken();case 3:if(o=r.sent,c={headers:{Authorization:"Bearer ".concat(o.data.token),"Content-Type":"application/json"}},n.nodesAlreadyQueried.includes(t)){r.next=12;break}return r.next=8,w.a.get("https://api.mona.gallery/spaces/".concat(t,"/map?max=").concat(e),c);case 8:l=r.sent,n.nodesAlreadyQueried.push(t),d=n.map,n.map=k(k({},l.data),d);case 12:r.next=17;break;case 14:r.prev=14,r.t0=r.catch(0),console.log(r.t0);case 17:return r.abrupt("return",n.map);case 18:case"end":return r.stop()}}),r,null,[[0,14]])})))()},getAuthToken:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,body,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.authToken){e.next=14;break}return e.prev=1,n={headers:{"Content-Type":"application/json"}},body={clientId:"728iwRLx0TFp",clientSecret:"NTMTDGFRZBmPrjUf"},e.next=6,w.a.post("https://api.mona.gallery/oauth",body,n);case 6:return r=e.sent,t.authToken=r,e.abrupt("return",r);case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:return e.abrupt("return",t.authToken);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))()},updateGraph:function(t,e){var n=this,r=t.filter((function(t){return!e.includes(t)})).map((function(t){return t.id}));console.log(r),r.forEach((function(t){var e=n.map[t];n.graph.mergeNode(e.id,{size:20,label:e.title,type:"image",image:"https://dummyimage.com/400/000/fff",color:n.settings.nodeColor})})),this.edgeList.forEach((function(t){n.graph.mergeEdge(t.from,t.to,{type:"arrow",label:"",size:3})})),this.graph.nodes().forEach((function(t,i){if(r.includes(t)){var e=2*i*Math.PI/n.graph.order;n.graph.setNodeAttribute(t,"x",100*Math.cos(e)),n.graph.setNodeAttribute(t,"y",100*Math.sin(e))}}))},initializeGraph:function(){var t=this;this.nodeList.forEach((function(e){var n=t.map[e.id];t.graph.mergeNode(n.id,{size:20,label:n.title,type:"image",image:"https://dummyimage.com/400/000/fff",color:t.settings.nodeColor})})),this.edgeList.forEach((function(e){t.graph.mergeEdge(e.from,e.to,{type:"arrow",label:"",size:3})})),this.graph.nodes().forEach((function(e,i){var n=2*i*Math.PI/t.graph.order;t.graph.setNodeAttribute(e,"x",100*Math.cos(n)),t.graph.setNodeAttribute(e,"y",100*Math.sin(n))}));var e=this.$refs.sigmaContainer,n=new f.a(this.graph,e,{nodeProgramClasses:{image:m()(),border:v.default},minCameraRatio:this.settings.minZoom,maxCameraRatio:this.settings.maxZoom});this.renderer=n,n.getMouseCaptor().on("mouseup",(function(){t.drag=!1;var e=t.renderer.quadtree.cache;t.queryQuadTreeList(e)})),n.on("clickNode",(function(e){var r=t.map[e.node];t.infoPanel=r,t.focusNode(n)})),new x.a(this.graph,{settings:{gravity:8e-4,repulsion:.5}}).start()}},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.initialSpaceId){e.next=5;break}return e.next=4,t.getMapBySpaceId(t.initialSpaceId,t.settings.initialSpaceQueryLimit);case 4:t.settings.selectSpaceOnLoad&&setTimeout((function(){t.infoPanel=t.map[t.initialSpaceId],t.focusNode(t.renderer)}),1500);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}},P=O,j=(n(291),n(54)),component=Object(j.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"network-graph-wrap"},[t.infoPanel?n("div",{staticClass:"info-panel"},[n("div",{staticClass:"header",style:"background-image:url("+t.infoPanel.image+");"}),t._v(" "),n("div",{staticClass:"content-body"},[n("span",{staticClass:"close-panel",on:{click:function(e){return t.clearInfoPanel()}}},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"}},[n("path",{attrs:{d:"M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"}})])]),t._v(" "),n("h1",[t._v(t._s(t.infoPanel.title)+" \n          "),t.infoPanel.gating?n("span",{staticClass:"token-gated"},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"}},[n("path",{attrs:{d:"M80 192V144C80 64.47 144.5 0 224 0C303.5 0 368 64.47 368 144V192H384C419.3 192 448 220.7 448 256V448C448 483.3 419.3 512 384 512H64C28.65 512 0 483.3 0 448V256C0 220.7 28.65 192 64 192H80zM144 192H304V144C304 99.82 268.2 64 224 64C179.8 64 144 99.82 144 144V192z"}})])]):t._e()]),t._v(" "),n("h2",[t._v(t._s(t.infoPanel.artist))]),t._v(" "),n("p",[t._v(t._s(t.infoPanel.description))]),t._v(" "),n("div",{staticClass:"themes"},t._l(t.infoPanel.themes,(function(e){return n("span",{key:e,staticClass:"pill"},[t._v(t._s(e))])})),0),t._v(" "),n("a",{staticClass:"cta-btn",attrs:{href:"https://mona.gallery/spaces/"+t.infoPanel.id,target:"_blank"}},[t._v("Enter Space")])])]):t._e(),t._v(" "),n("div",{ref:"sigmaContainer",staticStyle:{width:"100%"},attrs:{id:"sigma-container"}})])}),[],!1,null,null,null);e.default=component.exports}}]);